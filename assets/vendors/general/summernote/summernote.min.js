(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],e):e(t.jQuery)})(this,function(F){"use strict";F=F&&F.hasOwnProperty("default")?F["default"]:F;var i=function(){function t(t,e,o,n){this.markup=t;this.children=e;this.options=o;this.callback=n}t.prototype.render=function(t){var o=F(this.markup);if(this.options&&this.options.contents){o.html(this.options.contents)}if(this.options&&this.options.className){o.addClass(this.options.className)}if(this.options&&this.options.data){F.each(this.options.data,function(t,e){o.attr("data-"+t,e)})}if(this.options&&this.options.click){o.on("click",this.options.click)}if(this.children){var e=o.find(".note-children-container");this.children.forEach(function(t){t.render(e.length?e:o)})}if(this.callback){this.callback(o,this.options)}if(this.options&&this.options.callback){this.options.callback(o)}if(t){t.append(o)}return o};return t}();var o={create:function(o,n){return function(){var t=typeof arguments[1]==="object"?arguments[1]:arguments[0];var e=F.isArray(arguments[0])?arguments[0]:[];if(t&&t.children){e=t.children}return new i(o,e,t,n)}}};var t=o.create('<div class="note-editor note-frame panel panel-default"/>');var e=o.create('<div class="note-toolbar panel-heading" role="toolbar"></div></div>');var n=o.create('<div class="note-editing-area"/>');var r=o.create('<textarea class="note-codable" role="textbox" aria-multiline="true"/>');var a=o.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>');var s=o.create(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var l=o.create('<div class="note-editor"/>');var c=o.create(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" aria-live="polite"/>'].join(""));var d=o.create('<div class="note-btn-group btn-group">');var u=o.create('<ul class="dropdown-menu" role="list">',function(t,a){var e=F.isArray(a.items)?a.items.map(function(t){var e=typeof t==="string"?t:t.value||"";var o=a.template?a.template(t):t;var n=typeof t==="object"?t.option:undefined;var i='data-value="'+e+'"';var r=n!==undefined?' data-option="'+n+'"':"";return'<li role="listitem" aria-label="'+t+'"><a href="#" '+(i+r)+">"+o+"</a></li>"}).join(""):a.items;t.html(e).attr({"aria-label":a.title})});var h=function(t,e){return t+" "+b(e.icons.caret,"span")};var f=o.create('<ul class="dropdown-menu note-check" role="list">',function(t,n){var e=F.isArray(n.items)?n.items.map(function(t){var e=typeof t==="string"?t:t.value||"";var o=n.template?n.template(t):t;return'<li role="listitem" aria-label="'+t+'"><a href="#" data-value="'+e+'">'+b(n.checkClassName)+" "+o+"</a></li>"}).join(""):n.items;t.html(e).attr({"aria-label":n.title})});var p=o.create('<div class="note-color-palette"/>',function(t,e){var o=[];for(var n=0,i=e.colors.length;n<i;n++){var r=e.eventName;var a=e.colors[n];var s=e.colorsName[n];var l=[];for(var c=0,d=a.length;c<d;c++){var u=a[c];var h=s[c];l.push(['<button type="button" class="note-color-btn"','style="background-color:',u,'" ','data-event="',r,'" ','data-value="',u,'" ','title="',h,'" ','aria-label="',h,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}o.push('<div class="note-color-row">'+l.join("")+"</div>")}t.html(o.join(""));if(e.tooltip){t.find(".note-color-btn").tooltip({container:e.container,trigger:"hover",placement:"bottom"})}});var v=o.create('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(t,e){if(e.fade){t.addClass("fade")}t.attr({"aria-label":e.title});t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>'+'      <h4 class="modal-title">'+e.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))});var m=o.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var o=typeof e.direction!=="undefined"?e.direction:"bottom";t.addClass(o);if(e.hideArrow){t.find(".arrow").hide()}});var g=o.create('<div class="checkbox"></div>',function(t,e){t.html(["<label"+(e.id?' for="'+e.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(e.id?' id="'+e.id+'"':""),e.checked?" checked":"",' aria-checked="'+(e.checked?"true":"false")+'"/>',e.text?e.text:"","</label>"].join(""))});var b=function(t,e){e=e||"i";return"<"+e+' class="'+t+'"/>'};var y={editor:t,toolbar:e,editingArea:n,codable:r,editable:a,statusbar:s,airEditor:l,airEditable:c,buttonGroup:d,dropdown:u,dropdownButtonContents:h,dropdownCheck:f,palette:p,dialog:v,popover:m,checkbox:g,icon:b,options:{},button:function(t,e){return o.create('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(t,e){if(e&&e.tooltip){t.attr({title:e.tooltip,"aria-label":e.tooltip}).tooltip({container:e.container!==undefined?e.container:"body",trigger:"hover",placement:"bottom"})}})(t,e)},toggleBtn:function(t,e){t.toggleClass("disabled",!e);t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var o=(e.airMode?y.airEditor([y.editingArea([y.airEditable()])]):y.editor([y.toolbar(),y.editingArea([y.codable(),y.editable()]),y.statusbar()])).render();o.insertAfter(t);return{note:t,editor:o,toolbar:o.find(".note-toolbar"),editingArea:o.find(".note-editing-area"),editable:o.find(".note-editable"),codable:o.find(".note-codable"),statusbar:o.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html());e.editor.remove();t.show()}};function k(e){return function(t){return e===t}}function C(t,e){return t===e}function w(o){return function(t,e){return t[o]===e[o]}}function x(){return true}function S(){return false}function T(t){return function(){return!t.apply(t,arguments)}}function I(e,o){return function(t){return e(t)&&o(t)}}function N(t){return t}function E(t,e){return function(){return t[e].apply(t,arguments)}}var A=0;function R(t){var e=++A+"";return t?t+e:e}function P(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}}function L(t){var e={};for(var o in t){if(t.hasOwnProperty(o)){e[t[o]]=o}}return e}function H(t,e){e=e||"";return e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")}function D(i,r,a){var s;return function(){var t=this;var e=arguments;var o=function(){s=null;if(!a){i.apply(t,e)}};var n=a&&!s;clearTimeout(s);s=setTimeout(o,r);if(n){i.apply(t,e)}}}var B={eq:k,eq2:C,peq2:w,ok:x,fail:S,self:N,not:T,and:I,invoke:E,uniqueId:R,rect2bnd:P,invertObject:L,namespaceToCamel:H,debounce:D};function z(t){return t[0]}function M(t){return t[t.length-1]}function O(t){return t.slice(0,t.length-1)}function U(t){return t.slice(1)}function j(t,e){for(var o=0,n=t.length;o<n;o++){var i=t[o];if(e(i)){return i}}}function q(t,e){for(var o=0,n=t.length;o<n;o++){if(!e(t[o])){return false}}return true}function K(t,e){return F.inArray(e,t)}function V(t,e){return K(t,e)!==-1}function W(t,o){o=o||B.self;return t.reduce(function(t,e){return t+o(e)},0)}function _(t){var e=[];var o=t.length;var n=-1;while(++n<o){e[n]=t[n]}return e}function G(t){return!t||!t.length}function Z(t,n){if(!t.length){return[]}var e=U(t);return e.reduce(function(t,e){var o=M(t);if(n(M(o),e)){o[o.length]=e}else{t[t.length]=[e]}return t},[[z(t)]])}function Y(t){var e=[];for(var o=0,n=t.length;o<n;o++){if(t[o]){e.push(t[o])}}return e}function Q(t){var e=[];for(var o=0,n=t.length;o<n;o++){if(!V(e,t[o])){e.push(t[o])}}return e}function J(t,e){var o=K(t,e);if(o===-1){return null}return t[o+1]}function X(t,e){var o=K(t,e);if(o===-1){return null}return t[o-1]}var tt={head:z,last:M,initial:O,tail:U,prev:X,next:J,find:j,contains:V,all:q,sum:W,from:_,isEmpty:G,clusterBy:Z,compact:Y,unique:Q};var et=typeof define==="function"&&define.amd;function ot(t){var e=t==="Comic Sans MS"?"Courier New":"Comic Sans MS";var o=F("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var n=o.css("fontFamily",e).width();var i=o.css("fontFamily",t+","+e).width();o.remove();return n!==i}var nt=navigator.userAgent;var it=/MSIE|Trident/i.test(nt);var rt;if(it){var at=/MSIE (\d+[.]\d+)/.exec(nt);if(at){rt=parseFloat(at[1])}at=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(nt);if(at){rt=parseFloat(at[1])}}var st=/Edge\/\d+/.test(nt);var lt=!!window.CodeMirror;if(!lt&&et){if(typeof __webpack_require__==="function"){try{require.resolve("codemirror");lt=true}catch(t){}}else if(typeof require!=="undefined"){if(typeof require.resolve!=="undefined"){try{require.resolve("codemirror");lt=true}catch(t){}}else if(typeof require.specified!=="undefined"){lt=require.specified("codemirror")}}}var ct="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;var dt=it||st?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";var ut={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:it,isEdge:st,isFF:!st&&/firefox/i.test(nt),isPhantom:/PhantomJS/i.test(nt),isWebkit:!st&&/webkit/i.test(nt),isChrome:!st&&/chrome/i.test(nt),isSafari:!st&&/safari/i.test(nt),browserVersion:rt,jqueryVersion:parseFloat(F.fn.jquery),isSupportAmd:et,isSupportTouch:ct,hasCodeMirror:lt,isFontInstalled:ot,isW3CRangeSupport:!!document.createRange,inputEventName:dt};var ht=String.fromCharCode(160);var ft="\ufeff";function pt(t){return t&&F(t).hasClass("note-editable")}function vt(t){return t&&F(t).hasClass("note-control-sizing")}function mt(e){e=e.toUpperCase();return function(t){return t&&t.nodeName.toUpperCase()===e}}function gt(t){return t&&t.nodeType===3}function bt(t){return t&&t.nodeType===1}function yt(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^VIDEO|^EMBED/.test(t.nodeName.toUpperCase())}function kt(t){if(pt(t)){return false}return t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())}function Ct(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())}var wt=mt("PRE");var xt=mt("LI");function St(t){return kt(t)&&!xt(t)}var Tt=mt("TABLE");var It=mt("DATA");function $t(t){return!Ft(t)&&!Nt(t)&&!Et(t)&&!kt(t)&&!Tt(t)&&!Rt(t)&&!It(t)}function Nt(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())}var Et=mt("HR");function At(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())}var Rt=mt("BLOCKQUOTE");function Ft(t){return At(t)||Rt(t)||pt(t)}var Pt=mt("A");function Lt(t){return $t(t)&&!!qt(t,kt)}function Ht(t){return $t(t)&&!qt(t,kt)}var Dt=mt("BODY");function Bt(t,e){return t.nextSibling===e||t.previousSibling===e}function zt(t,e){e=e||B.ok;var o=[];if(t.previousSibling&&e(t.previousSibling)){o.push(t.previousSibling)}o.push(t);if(t.nextSibling&&e(t.nextSibling)){o.push(t.nextSibling)}return o}var Mt=ut.isMSIE&&ut.browserVersion<11?"&nbsp;":"<br>";function Ot(t){if(gt(t)){return t.nodeValue.length}if(t){return t.childNodes.length}return 0}function Ut(t){var e=Ot(t);if(e===0){return true}else if(!gt(t)&&e===1&&t.innerHTML===Mt){return true}else if(tt.all(t.childNodes,gt)&&t.innerHTML===""){return true}return false}function jt(t){if(!yt(t)&&!Ot(t)){t.innerHTML=Mt}}function qt(t,e){while(t){if(e(t)){return t}if(pt(t)){break}t=t.parentNode}return null}function Kt(t,e){t=t.parentNode;while(t){if(Ot(t)!==1){break}if(e(t)){return t}if(pt(t)){break}t=t.parentNode}return null}function Vt(t,e){e=e||B.fail;var o=[];qt(t,function(t){if(!pt(t)){o.push(t)}return e(t)});return o}function Wt(t,e){var o=Vt(t);return tt.last(o.filter(e))}function _t(t,e){var o=Vt(t);for(var n=e;n;n=n.parentNode){if(F.inArray(n,o)>-1){return n}}return null}function Gt(t,e){e=e||B.fail;var o=[];while(t){if(e(t)){break}o.push(t);t=t.previousSibling}return o}function Zt(t,e){e=e||B.fail;var o=[];while(t){if(e(t)){break}o.push(t);t=t.nextSibling}return o}function Yt(i,r){var a=[];r=r||B.ok;(function t(e){if(i!==e&&r(e)){a.push(e)}for(var o=0,n=e.childNodes.length;o<n;o++){t(e.childNodes[o])}})(i);return a}function Qt(t,e){var o=t.parentNode;var n=F("<"+e+">")[0];o.insertBefore(n,t);n.appendChild(t);return n}function Jt(t,e){var o=e.nextSibling;var n=e.parentNode;if(o){n.insertBefore(t,o)}else{n.appendChild(t)}return t}function Xt(o,t){F.each(t,function(t,e){o.appendChild(e)});return o}function te(t){return t.offset===0}function ee(t){return t.offset===Ot(t.node)}function oe(t){return te(t)||ee(t)}function ne(t,e){while(t&&t!==e){if(se(t)!==0){return false}t=t.parentNode}return true}function ie(t,e){if(!e){return false}while(t&&t!==e){if(se(t)!==Ot(t.parentNode)-1){return false}t=t.parentNode}return true}function re(t,e){return te(t)&&ne(t.node,e)}function ae(t,e){return ee(t)&&ie(t.node,e)}function se(t){var e=0;while(t=t.previousSibling){e+=1}return e}function le(t){return!!(t&&t.childNodes&&t.childNodes.length)}function ce(t,e){var o;var n;if(t.offset===0){if(pt(t.node)){return null}o=t.node.parentNode;n=se(t.node)}else if(le(t.node)){o=t.node.childNodes[t.offset-1];n=Ot(o)}else{o=t.node;n=e?0:t.offset-1}return{node:o,offset:n}}function de(t,e){var o,n;if(Ot(t.node)===t.offset){if(pt(t.node)){return null}o=t.node.parentNode;n=se(t.node)+1}else if(le(t.node)){o=t.node.childNodes[t.offset];n=0}else{o=t.node;n=e?Ot(t.node):t.offset+1}return{node:o,offset:n}}function ue(t,e){return t.node===e.node&&t.offset===e.offset}function he(t){if(gt(t.node)||!le(t.node)||Ut(t.node)){return true}var e=t.node.childNodes[t.offset-1];var o=t.node.childNodes[t.offset];if((!e||yt(e))&&(!o||yt(o))){return true}return false}function fe(t,e){while(t){if(e(t)){return t}t=ce(t)}return null}function pe(t,e){while(t){if(e(t)){return t}t=de(t)}return null}function ve(t){if(!gt(t.node)){return false}var e=t.node.nodeValue.charAt(t.offset-1);return e&&(e!==" "&&e!==ht)}function me(t,e,o,n){var i=t;while(i){o(i);if(ue(i,e)){break}var r=n&&t.node!==i.node&&e.node!==i.node;i=de(i,r)}}function ge(t,e){var o=Vt(e,B.eq(t));return o.map(se).reverse()}function be(t,e){var o=t;for(var n=0,i=e.length;n<i;n++){if(o.childNodes.length<=e[n]){o=o.childNodes[o.childNodes.length-1]}else{o=o.childNodes[e[n]]}}return o}function ye(t,e){var o=e&&e.isSkipPaddingBlankHTML;var n=e&&e.isNotSplitEdgePoint;var i=e&&e.isDiscardEmptySplits;if(i){o=true}if(oe(t)&&(gt(t.node)||n)){if(te(t)){return t.node}else if(ee(t)){return t.node.nextSibling}}if(gt(t.node)){return t.node.splitText(t.offset)}else{var r=t.node.childNodes[t.offset];var a=Jt(t.node.cloneNode(false),t.node);Xt(a,Zt(r));if(!o){jt(t.node);jt(a)}if(i){if(Ut(t.node)){Se(t.node)}if(Ut(a)){Se(a);return t.node.nextSibling}}return a}}function ke(t,o,n){var e=Vt(o.node,B.eq(t));if(!e.length){return null}else if(e.length===1){return ye(o,n)}return e.reduce(function(t,e){if(t===o.node){t=ye(o,n)}return ye({node:e,offset:t?se(t):Ot(e)},n)})}function Ce(t,e){var o=e?kt:Ft;var n=Vt(t.node,o);var i=tt.last(n)||t.node;var r,a;if(o(i)){r=n[n.length-2];a=i}else{r=i;a=r.parentNode}var s=r&&ke(r,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});if(!s&&a===t.node){s=t.node.childNodes[t.offset]}return{rightNode:s,container:a}}function we(t){return document.createElement(t)}function xe(t){return document.createTextNode(t)}function Se(t,e){if(!t||!t.parentNode){return}if(t.removeNode){return t.removeNode(e)}var o=t.parentNode;if(!e){var n=[];for(var i=0,r=t.childNodes.length;i<r;i++){n.push(t.childNodes[i])}for(var i=0,r=n.length;i<r;i++){o.insertBefore(n[i],t)}}o.removeChild(t)}function Te(t,e){while(t){if(pt(t)||!e(t)){break}var o=t.parentNode;Se(t);t=o}}function Ie(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase()){return t}var o=we(e);if(t.style.cssText){o.style.cssText=t.style.cssText}Xt(o,tt.from(t.childNodes));Jt(o,t);Se(t);return o}var $e=mt("TEXTAREA");function Ne(t,e){var o=$e(t[0])?t.val():t.html();if(e){return o.replace(/[\n\r]/g,"")}return o}function Ee(t,e){var o=Ne(t);if(e){var n=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;o=o.replace(n,function(t,e,o){o=o.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(o)&&!!e;var i=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(o);return t+(n||i?"\n":"")});o=F.trim(o)}return o}function Ae(t){var e=F(t);var o=e.offset();var n=e.outerHeight(true);return{left:o.left,top:o.top+n}}function Re(e,o){Object.keys(o).forEach(function(t){e.on(t,o[t])})}function Fe(e,o){Object.keys(o).forEach(function(t){e.off(t,o[t])})}function Pe(t){return t&&!gt(t)&&tt.contains(t.classList,"note-styletag")}var Le={NBSP_CHAR:ht,ZERO_WIDTH_NBSP_CHAR:ft,blank:Mt,emptyPara:"<p>"+Mt+"</p>",makePredByNodeName:mt,isEditable:pt,isControlSizing:vt,isText:gt,isElement:bt,isVoid:yt,isPara:kt,isPurePara:St,isHeading:Ct,isInline:$t,isBlock:B.not($t),isBodyInline:Ht,isBody:Dt,isParaInline:Lt,isPre:wt,isList:Nt,isTable:Tt,isData:It,isCell:At,isBlockquote:Rt,isBodyContainer:Ft,isAnchor:Pt,isDiv:mt("DIV"),isLi:xt,isBR:mt("BR"),isSpan:mt("SPAN"),isB:mt("B"),isU:mt("U"),isS:mt("S"),isI:mt("I"),isImg:mt("IMG"),isTextarea:$e,isEmpty:Ut,isEmptyAnchor:B.and(Pt,Ut),isClosestSibling:Bt,withClosestSiblings:zt,nodeLength:Ot,isLeftEdgePoint:te,isRightEdgePoint:ee,isEdgePoint:oe,isLeftEdgeOf:ne,isRightEdgeOf:ie,isLeftEdgePointOf:re,isRightEdgePointOf:ae,prevPoint:ce,nextPoint:de,isSamePoint:ue,isVisiblePoint:he,prevPointUntil:fe,nextPointUntil:pe,isCharPoint:ve,walkPoint:me,ancestor:qt,singleChildAncestor:Kt,listAncestor:Vt,lastAncestor:Wt,listNext:Zt,listPrev:Gt,listDescendant:Yt,commonAncestor:_t,wrap:Qt,insertAfter:Jt,appendChildNodes:Xt,position:se,hasChildren:le,makeOffsetPath:ge,fromOffsetPath:be,splitTree:ke,splitPoint:Ce,create:we,createText:xe,remove:Se,removeWhile:Te,replace:Ie,html:Ee,value:Ne,posFromPlaceholder:Ae,attachEvents:Re,detachEvents:Fe,isCustomStyleTag:Pe};function He(t,e){var o=t.parentElement();var n;var i=document.body.createTextRange();var r;var a=tt.from(o.childNodes);for(n=0;n<a.length;n++){if(Le.isText(a[n])){continue}i.moveToElementText(a[n]);if(i.compareEndPoints("StartToStart",t)>=0){break}r=a[n]}if(n!==0&&Le.isText(a[n-1])){var s=document.body.createTextRange();var l=null;s.moveToElementText(r||o);s.collapse(!r);l=r?r.nextSibling:o.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",s);var d=c.text.replace(/[\r\n]/g,"").length;while(d>l.nodeValue.length&&l.nextSibling){d-=l.nodeValue.length;l=l.nextSibling}var u=l.nodeValue;if(e&&l.nextSibling&&Le.isText(l.nextSibling)&&d===l.nodeValue.length){d-=l.nodeValue.length;l=l.nextSibling}o=l;n=d}return{cont:o,offset:n}}function De(t){var a=function(t,e){var o,n;if(Le.isText(t)){var i=Le.listPrev(t,B.not(Le.isText));var r=tt.last(i).previousSibling;o=r||t.parentNode;e+=tt.sum(tt.tail(i),Le.nodeLength);n=!r}else{o=t.childNodes[e]||t;if(Le.isText(o)){return a(o,0)}e=0;n=false}return{node:o,collapseToStart:n,offset:e}};var e=document.body.createTextRange();var o=a(t.node,t.offset);e.moveToElementText(o.node);e.collapse(o.collapseToStart);e.moveStart("character",o.offset);return e}var Be=function(){function r(t,e,o,n){this.sc=t;this.so=e;this.ec=o;this.eo=n;this.isOnEditable=this.makeIsOn(Le.isEditable);this.isOnList=this.makeIsOn(Le.isList);this.isOnAnchor=this.makeIsOn(Le.isAnchor);this.isOnCell=this.makeIsOn(Le.isCell);this.isOnData=this.makeIsOn(Le.isData)}r.prototype.nativeRange=function(){if(ut.isW3CRangeSupport){var t=document.createRange();t.setStart(this.sc,this.so);t.setEnd(this.ec,this.eo);return t}else{var e=De({node:this.sc,offset:this.so});e.setEndPoint("EndToEnd",De({node:this.ec,offset:this.eo}));return e}};r.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}};r.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}};r.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}};r.prototype.select=function(){var t=this.nativeRange();if(ut.isW3CRangeSupport){var e=document.getSelection();if(e.rangeCount>0){e.removeAllRanges()}e.addRange(t)}else{t.select()}return this};r.prototype.scrollIntoView=function(t){var e=F(t).height();if(t.scrollTop+e<this.sc.offsetTop){t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)}return this};r.prototype.normalize=function(){var t=function(t,e){if(Le.isVisiblePoint(t)&&!Le.isEdgePoint(t)||Le.isVisiblePoint(t)&&Le.isRightEdgePoint(t)&&!e||Le.isVisiblePoint(t)&&Le.isLeftEdgePoint(t)&&e||Le.isVisiblePoint(t)&&Le.isBlock(t.node)&&Le.isEmpty(t.node)){return t}var o=Le.ancestor(t.node,Le.isBlock);if((Le.isLeftEdgePointOf(t,o)||Le.isVoid(Le.prevPoint(t).node))&&!e||(Le.isRightEdgePointOf(t,o)||Le.isVoid(Le.nextPoint(t).node))&&e){if(Le.isVisiblePoint(t)){return t}e=!e}var n=e?Le.nextPointUntil(Le.nextPoint(t),Le.isVisiblePoint):Le.prevPointUntil(Le.prevPoint(t),Le.isVisiblePoint);return n||t};var e=t(this.getEndPoint(),false);var o=this.isCollapsed()?e:t(this.getStartPoint(),true);return new r(o.node,o.offset,e.node,e.offset)};r.prototype.nodes=function(o,t){o=o||B.ok;var n=t&&t.includeAncestor;var i=t&&t.fullyContains;var e=this.getStartPoint();var r=this.getEndPoint();var a=[];var s=[];Le.walkPoint(e,r,function(t){if(Le.isEditable(t.node)){return}var e;if(i){if(Le.isLeftEdgePoint(t)){s.push(t.node)}if(Le.isRightEdgePoint(t)&&tt.contains(s,t.node)){e=t.node}}else if(n){e=Le.ancestor(t.node,o)}else{e=t.node}if(e&&o(e)){a.push(e)}},true);return tt.unique(a)};r.prototype.commonAncestor=function(){return Le.commonAncestor(this.sc,this.ec)};r.prototype.expand=function(t){var e=Le.ancestor(this.sc,t);var o=Le.ancestor(this.ec,t);if(!e&&!o){return new r(this.sc,this.so,this.ec,this.eo)}var n=this.getPoints();if(e){n.sc=e;n.so=0}if(o){n.ec=o;n.eo=Le.nodeLength(o)}return new r(n.sc,n.so,n.ec,n.eo)};r.prototype.collapse=function(t){if(t){return new r(this.sc,this.so,this.sc,this.so)}else{return new r(this.ec,this.eo,this.ec,this.eo)}};r.prototype.splitText=function(){var t=this.sc===this.ec;var e=this.getPoints();if(Le.isText(this.ec)&&!Le.isEdgePoint(this.getEndPoint())){this.ec.splitText(this.eo)}if(Le.isText(this.sc)&&!Le.isEdgePoint(this.getStartPoint())){e.sc=this.sc.splitText(this.so);e.so=0;if(t){e.ec=e.sc;e.eo=this.eo-this.so}}return new r(e.sc,e.so,e.ec,e.eo)};r.prototype.deleteContents=function(){if(this.isCollapsed()){return this}var t=this.splitText();var e=t.nodes(null,{fullyContains:true});var n=Le.prevPointUntil(t.getStartPoint(),function(t){return!tt.contains(e,t.node)});var i=[];F.each(e,function(t,e){var o=e.parentNode;if(n.node!==o&&Le.nodeLength(o)===1){i.push(o)}Le.remove(e,false)});F.each(i,function(t,e){Le.remove(e,false)});return new r(n.node,n.offset,n.node,n.offset).normalize()};r.prototype.makeIsOn=function(e){return function(){var t=Le.ancestor(this.sc,e);return!!t&&t===Le.ancestor(this.ec,e)}};r.prototype.isLeftEdgeOf=function(t){if(!Le.isLeftEdgePoint(this.getStartPoint())){return false}var e=Le.ancestor(this.sc,t);return e&&Le.isLeftEdgeOf(this.sc,e)};r.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo};r.prototype.wrapBodyInlineWithPara=function(){if(Le.isBodyContainer(this.sc)&&Le.isEmpty(this.sc)){this.sc.innerHTML=Le.emptyPara;return new r(this.sc.firstChild,0,this.sc.firstChild,0)}var t=this.normalize();if(Le.isParaInline(this.sc)||Le.isPara(this.sc)){return t}var e;if(Le.isInline(t.sc)){var o=Le.listAncestor(t.sc,B.not(Le.isInline));e=tt.last(o);if(!Le.isInline(e)){e=o[o.length-2]||t.sc.childNodes[t.so]}}else{e=t.sc.childNodes[t.so>0?t.so-1:0]}var n=Le.listPrev(e,Le.isParaInline).reverse();n=n.concat(Le.listNext(e.nextSibling,Le.isParaInline));if(n.length){var i=Le.wrap(tt.head(n),"p");Le.appendChildNodes(i,tt.tail(n))}return this.normalize()};r.prototype.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents();var o=Le.splitPoint(e.getStartPoint(),Le.isInline(t));if(o.rightNode){o.rightNode.parentNode.insertBefore(t,o.rightNode)}else{o.container.appendChild(t)}return t};r.prototype.pasteHTML=function(t){var e=F("<div></div>").html(t)[0];var o=tt.from(e.childNodes);var n=this.wrapBodyInlineWithPara().deleteContents();if(n.so>0){o=o.reverse()}o=o.map(function(t){return n.insertNode(t)});if(n.so>0){o=o.reverse()}return o};r.prototype.toString=function(){var t=this.nativeRange();return ut.isW3CRangeSupport?t.toString():t.text};r.prototype.getWordRange=function(t){var e=this.getEndPoint();if(!Le.isCharPoint(e)){return this}var o=Le.prevPointUntil(e,function(t){return!Le.isCharPoint(t)});if(t){e=Le.nextPointUntil(e,function(t){return!Le.isCharPoint(t)})}return new r(o.node,o.offset,e.node,e.offset)};r.prototype.bookmark=function(t){return{s:{path:Le.makeOffsetPath(t,this.sc),offset:this.so},e:{path:Le.makeOffsetPath(t,this.ec),offset:this.eo}}};r.prototype.paraBookmark=function(t){return{s:{path:tt.tail(Le.makeOffsetPath(tt.head(t),this.sc)),offset:this.so},e:{path:tt.tail(Le.makeOffsetPath(tt.last(t),this.ec)),offset:this.eo}}};r.prototype.getClientRects=function(){var t=this.nativeRange();return t.getClientRects()};return r}();var ze={create:function(t,e,o,n){if(arguments.length===4){return new Be(t,e,o,n)}else if(arguments.length===2){o=t;n=e;return new Be(t,e,o,n)}else{var i=this.createFromSelection();if(!i&&arguments.length===1){i=this.createFromNode(arguments[0]);return i.collapse(Le.emptyPara===arguments[0].innerHTML)}return i}},createFromSelection:function(){var t,e,o,n;if(ut.isW3CRangeSupport){var i=document.getSelection();if(!i||i.rangeCount===0){return null}else if(Le.isBody(i.anchorNode)){return null}var r=i.getRangeAt(0);t=r.startContainer;e=r.startOffset;o=r.endContainer;n=r.endOffset}else{var a=document.selection.createRange();var s=a.duplicate();s.collapse(false);var l=a;l.collapse(true);var c=He(l,true);var d=He(s,false);if(Le.isText(c.node)&&Le.isLeftEdgePoint(c)&&Le.isTextNode(d.node)&&Le.isRightEdgePoint(d)&&d.node.nextSibling===c.node){c=d}t=c.cont;e=c.offset;o=d.cont;n=d.offset}return new Be(t,e,o,n)},createFromNode:function(t){var e=t;var o=0;var n=t;var i=Le.nodeLength(n);if(Le.isVoid(e)){o=Le.listPrev(e).length-1;e=e.parentNode}if(Le.isBR(n)){i=Le.listPrev(n).length-1;n=n.parentNode}else if(Le.isVoid(n)){i=Le.listPrev(n).length;n=n.parentNode}return this.create(e,o,n,i)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(true)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var o=Le.fromOffsetPath(t,e.s.path);var n=e.s.offset;var i=Le.fromOffsetPath(t,e.e.path);var r=e.e.offset;return new Be(o,n,i,r)},createFromParaBookmark:function(t,e){var o=t.s.offset;var n=t.e.offset;var i=Le.fromOffsetPath(tt.head(e),t.s.path);var r=Le.fromOffsetPath(tt.last(e),t.e.path);return new Be(i,o,r,n)}};F.summernote=F.summernote||{lang:{}};F.extend(F.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var Me={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};var Oe={isEdit:function(t){return tt.contains([Me.BACKSPACE,Me.TAB,Me.ENTER,Me.SPACE,Me.DELETE],t)},isMove:function(t){return tt.contains([Me.LEFT,Me.UP,Me.RIGHT,Me.DOWN],t)},nameFromCode:B.invertObject(Me),code:Me};function Ue(t){return F.Deferred(function(o){F.extend(new FileReader,{onload:function(t){var e=t.target.result;o.resolve(e)},onerror:function(t){o.reject(t)}}).readAsDataURL(t)}).promise()}function je(o){return F.Deferred(function(t){var e=F("<img>");e.one("load",function(){e.off("error abort");t.resolve(e)}).one("error abort",function(){e.off("load").detach();t.reject(e)}).css({display:"none"}).appendTo(document.body).attr("src",o)}).promise()}var qe=function(){function t(t){this.stack=[];this.stackOffset=-1;this.$editable=t;this.editable=t[0]}t.prototype.makeSnapshot=function(){var t=ze.create(this.editable);var e={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:t?t.bookmark(this.editable):e}};t.prototype.applySnapshot=function(t){if(t.contents!==null){this.$editable.html(t.contents)}if(t.bookmark!==null){ze.createFromBookmark(this.editable,t.bookmark).select()}};t.prototype.rewind=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])};t.prototype.commit=function(){this.stack=[];this.stackOffset=-1;this.recordUndo()};t.prototype.reset=function(){this.stack=[];this.stackOffset=-1;this.$editable.html("");this.recordUndo()};t.prototype.undo=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}if(this.stackOffset>0){this.stackOffset--;this.applySnapshot(this.stack[this.stackOffset])}};t.prototype.redo=function(){if(this.stack.length-1>this.stackOffset){this.stackOffset++;this.applySnapshot(this.stack[this.stackOffset])}};t.prototype.recordUndo=function(){this.stackOffset++;if(this.stack.length>this.stackOffset){this.stack=this.stack.slice(0,this.stackOffset)}this.stack.push(this.makeSnapshot())};return t}();var Ke=function(){function t(){}t.prototype.jQueryCSS=function(o,t){if(ut.jqueryVersion<1.9){var n={};F.each(t,function(t,e){n[e]=o.css(e)});return n}return o.css(t)};t.prototype.fromNode=function(t){var e=["font-family","font-size","text-align","list-style-type","line-height"];var o=this.jQueryCSS(t,e)||{};o["font-size"]=parseInt(o["font-size"],10);return o};t.prototype.stylePara=function(t,o){F.each(t.nodes(Le.isPara,{includeAncestor:true}),function(t,e){F(e).css(o)})};t.prototype.styleNodes=function(t,e){t=t.splitText();var o=e&&e.nodeName||"SPAN";var n=!!(e&&e.expandClosestSibling);var i=!!(e&&e.onlyPartialContains);if(t.isCollapsed()){return[t.insertNode(Le.create(o))]}var r=Le.makePredByNodeName(o);var a=t.nodes(Le.isText,{fullyContains:true}).map(function(t){return Le.singleChildAncestor(t,r)||Le.wrap(t,o)});if(n){if(i){var s=t.nodes();r=B.and(r,function(t){return tt.contains(s,t)})}return a.map(function(t){var e=Le.withClosestSiblings(t,r);var o=tt.head(e);var n=tt.tail(e);F.each(n,function(t,e){Le.appendChildNodes(o,e.childNodes);Le.remove(e)});return tt.head(e)})}else{return a}};t.prototype.current=function(t){var e=F(!Le.isElement(t.sc)?t.sc.parentNode:t.sc);var o=this.fromNode(e);try{o=F.extend(o,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||o["font-family"]})}catch(t){}if(!t.isOnList()){o["list-style"]="none"}else{var n=["circle","disc","disc-leading-zero","square"];var i=F.inArray(o["list-style-type"],n)>-1;o["list-style"]=i?"unordered":"ordered"}var r=Le.ancestor(t.sc,Le.isPara);if(r&&r.style["line-height"]){o["line-height"]=r.style.lineHeight}else{var a=parseInt(o["line-height"],10)/parseInt(o["font-size"],10);o["line-height"]=a.toFixed(1)}o.anchor=t.isOnAnchor()&&Le.ancestor(t.sc,Le.isAnchor);o.ancestors=Le.listAncestor(t.sc,Le.isEditable);o.range=t;return o};return t}();var Ve=function(){function t(){}t.prototype.insertOrderedList=function(t){this.toggleList("OL",t)};t.prototype.insertUnorderedList=function(t){this.toggleList("UL",t)};t.prototype.indent=function(t){var i=this;var e=ze.create(t).wrapBodyInlineWithPara();var o=e.nodes(Le.isPara,{includeAncestor:true});var n=tt.clusterBy(o,B.peq2("parentNode"));F.each(n,function(t,e){var o=tt.head(e);if(Le.isLi(o)){var n=i.findList(o.previousSibling);if(n){e.map(function(t){return n.appendChild(t)})}else{i.wrapList(e,o.parentNode.nodeName);e.map(function(t){return t.parentNode}).map(function(t){return i.appendToPrevious(t)})}}else{F.each(e,function(t,e){F(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}});e.select()};t.prototype.outdent=function(t){var n=this;var e=ze.create(t).wrapBodyInlineWithPara();var o=e.nodes(Le.isPara,{includeAncestor:true});var i=tt.clusterBy(o,B.peq2("parentNode"));F.each(i,function(t,e){var o=tt.head(e);if(Le.isLi(o)){n.releaseList([e])}else{F.each(e,function(t,e){F(e).css("marginLeft",function(t,e){e=parseInt(e,10)||0;return e>25?e-25:""})})}});e.select()};t.prototype.toggleList=function(o,t){var n=this;var e=ze.create(t).wrapBodyInlineWithPara();var i=e.nodes(Le.isPara,{includeAncestor:true});var r=e.paraBookmark(i);var a=tt.clusterBy(i,B.peq2("parentNode"));if(tt.find(i,Le.isPurePara)){var s=[];F.each(a,function(t,e){s=s.concat(n.wrapList(e,o))});i=s}else{var l=e.nodes(Le.isList,{includeAncestor:true}).filter(function(t){return!F.nodeName(t,o)});if(l.length){F.each(l,function(t,e){Le.replace(e,o)})}else{i=this.releaseList(a,true)}}ze.createFromParaBookmark(r,i).select()};t.prototype.wrapList=function(t,e){var o=tt.head(t);var n=tt.last(t);var i=Le.isList(o.previousSibling)&&o.previousSibling;var r=Le.isList(n.nextSibling)&&n.nextSibling;var a=i||Le.insertAfter(Le.create(e||"UL"),n);t=t.map(function(t){return Le.isPurePara(t)?Le.replace(t,"LI"):t});Le.appendChildNodes(a,t);if(r){Le.appendChildNodes(a,tt.from(r.childNodes));Le.remove(r)}return t};t.prototype.releaseList=function(t,c){var d=this;var u=[];F.each(t,function(t,e){var o=tt.head(e);var n=tt.last(e);var i=c?Le.lastAncestor(o,Le.isList):o.parentNode;var r=i.parentNode;if(i.parentNode.nodeName==="LI"){e.map(function(t){var e=d.findNextSiblings(t);if(r.nextSibling){r.parentNode.insertBefore(t,r.nextSibling)}else{r.parentNode.appendChild(t)}if(e.length){d.wrapList(e,i.nodeName);t.appendChild(e[0].parentNode)}});if(i.children.length===0){r.removeChild(i)}if(r.childNodes.length===0){r.parentNode.removeChild(r)}}else{var a=i.childNodes.length>1?Le.splitTree(i,{node:n.parentNode,offset:Le.position(n)+1},{isSkipPaddingBlankHTML:true}):null;var s=Le.splitTree(i,{node:o.parentNode,offset:Le.position(o)},{isSkipPaddingBlankHTML:true});e=c?Le.listDescendant(s,Le.isLi):tt.from(s.childNodes).filter(Le.isLi);if(c||!Le.isList(i.parentNode)){e=e.map(function(t){return Le.replace(t,"P")})}F.each(tt.from(e).reverse(),function(t,e){Le.insertAfter(e,i)});var l=tt.compact([i,s,a]);F.each(l,function(t,e){var o=[e].concat(Le.listDescendant(e,Le.isList));F.each(o.reverse(),function(t,e){if(!Le.nodeLength(e)){Le.remove(e,true)}})})}u=u.concat(e)});return u};t.prototype.appendToPrevious=function(t){return t.previousSibling?Le.appendChildNodes(t.previousSibling,[t]):this.wrapList([t],"LI")};t.prototype.findList=function(t){return t?tt.find(t.children,function(t){return["OL","UL"].indexOf(t.nodeName)>-1}):null};t.prototype.findNextSiblings=function(t){var e=[];while(t.nextSibling){e.push(t.nextSibling);t=t.nextSibling}return e};return t}();var We=function(){function t(t){this.bullet=new Ve;this.options=t.options}t.prototype.insertTab=function(t,e){var o=Le.createText(new Array(e+1).join(Le.NBSP_CHAR));t=t.deleteContents();t.insertNode(o,true);t=ze.create(o,e);t.select()};t.prototype.insertParagraph=function(t,e){e=e||ze.create(t);e=e.deleteContents();e=e.wrapBodyInlineWithPara();var o=Le.ancestor(e.sc,Le.isPara);var n;if(o){if(Le.isEmpty(o)&&Le.isLi(o)){this.bullet.toggleList(o.parentNode.nodeName);return}else{var i=null;if(this.options.blockquoteBreakingLevel===1){i=Le.ancestor(o,Le.isBlockquote)}else if(this.options.blockquoteBreakingLevel===2){i=Le.lastAncestor(o,Le.isBlockquote)}if(i){n=F(Le.emptyPara)[0];if(Le.isRightEdgePoint(e.getStartPoint())&&Le.isBR(e.sc.nextSibling)){F(e.sc.nextSibling).remove()}var r=Le.splitTree(i,e.getStartPoint(),{isDiscardEmptySplits:true});if(r){r.parentNode.insertBefore(n,r)}else{Le.insertAfter(n,i)}}else{n=Le.splitTree(o,e.getStartPoint());var a=Le.listDescendant(o,Le.isEmptyAnchor);a=a.concat(Le.listDescendant(n,Le.isEmptyAnchor));F.each(a,function(t,e){Le.remove(e)});if((Le.isHeading(n)||Le.isPre(n)||Le.isCustomStyleTag(n))&&Le.isEmpty(n)){n=Le.replace(n,"p")}}}}else{var s=e.sc.childNodes[e.so];n=F(Le.emptyPara)[0];if(s){e.sc.insertBefore(n,s)}else{e.sc.appendChild(n)}}ze.create(n,0).normalize().select().scrollIntoView(t)};return t}();var _e=function(t,c,d,i){var h={colPos:0,rowPos:0};var u=[];var f=[];function e(){if(!t||!t.tagName||t.tagName.toLowerCase()!=="td"&&t.tagName.toLowerCase()!=="th"){console.error("Impossible to identify start Cell point.",t);return}h.colPos=t.cellIndex;if(!t.parentElement||!t.parentElement.tagName||t.parentElement.tagName.toLowerCase()!=="tr"){console.error("Impossible to identify start Row point.",t);return}h.rowPos=t.parentElement.rowIndex}function p(t,e,o,n,i,r,a){var s={baseRow:o,baseCell:n,isRowSpan:i,isColSpan:r,isVirtual:a};if(!u[t]){u[t]=[]}u[t][e]=s}function v(t,e,o,n){return{baseCell:t.baseCell,action:e,virtualTable:{rowIndex:o,cellIndex:n}}}function m(t,e){if(!u[t]){return e}if(!u[t][e]){return e}var o=e;while(u[t][o]){o++;if(!u[t][o]){return o}}}function r(t,e){var o=m(t.rowIndex,e.cellIndex);var n=e.colSpan>1;var i=e.rowSpan>1;var r=t.rowIndex===h.rowPos&&e.cellIndex===h.colPos;p(t.rowIndex,o,t,e,i,n,false);var a=e.attributes.rowSpan?parseInt(e.attributes.rowSpan.value,10):0;if(a>1){for(var s=1;s<a;s++){var l=t.rowIndex+s;g(l,o,e,r);p(l,o,t,e,true,n,true)}}var c=e.attributes.colSpan?parseInt(e.attributes.colSpan.value,10):0;if(c>1){for(var d=1;d<c;d++){var u=m(t.rowIndex,o+d);g(t.rowIndex,u,e,r);p(t.rowIndex,u,t,e,i,true,true)}}}function g(t,e,o,n){if(t===h.rowPos&&h.colPos>=o.cellIndex&&o.cellIndex<=e&&!n){h.colPos++}}function o(){var t=i.rows;for(var e=0;e<t.length;e++){var o=t[e].cells;for(var n=0;n<o.length;n++){r(t[e],o[n])}}}function b(t){switch(c){case _e.where.Column:if(t.isColSpan){return _e.resultAction.SubtractSpanCount}break;case _e.where.Row:if(!t.isVirtual&&t.isRowSpan){return _e.resultAction.AddCell}else if(t.isRowSpan){return _e.resultAction.SubtractSpanCount}break}return _e.resultAction.RemoveCell}function y(t){switch(c){case _e.where.Column:if(t.isColSpan){return _e.resultAction.SumSpanCount}else if(t.isRowSpan&&t.isVirtual){return _e.resultAction.Ignore}break;case _e.where.Row:if(t.isRowSpan){return _e.resultAction.SumSpanCount}else if(t.isColSpan&&t.isVirtual){return _e.resultAction.Ignore}break}return _e.resultAction.AddCell}function n(){e();o()}this.getActionList=function(){var t=c===_e.where.Row?h.rowPos:-1;var e=c===_e.where.Column?h.colPos:-1;var o=0;var n=true;while(n){var i=t>=0?t:o;var r=e>=0?e:o;var a=u[i];if(!a){n=false;return f}var s=a[r];if(!s){n=false;return f}var l=_e.resultAction.Ignore;switch(d){case _e.requestAction.Add:l=y(s);break;case _e.requestAction.Delete:l=b(s);break}f.push(v(s,l,i,r));o++}return f};n()};_e.where={Row:0,Column:1};_e.requestAction={Add:0,Delete:1};_e.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Ge=function(){function t(){}t.prototype.tab=function(t,e){var o=Le.ancestor(t.commonAncestor(),Le.isCell);var n=Le.ancestor(o,Le.isTable);var i=Le.listDescendant(n,Le.isCell);var r=tt[e?"prev":"next"](i,o);if(r){ze.create(r,0).select()}};t.prototype.addRow=function(t,e){var o=Le.ancestor(t.commonAncestor(),Le.isCell);var n=F(o).closest("tr");var i=this.recoverAttributes(n);var r=F("<tr"+i+"></tr>");var a=new _e(o,_e.where.Row,_e.requestAction.Add,F(n).closest("table")[0]);var s=a.getActionList();for(var l=0;l<s.length;l++){var c=s[l];var d=this.recoverAttributes(c.baseCell);switch(c.action){case _e.resultAction.AddCell:r.append("<td"+d+">"+Le.blank+"</td>");break;case _e.resultAction.SumSpanCount:if(e==="top"){var u=c.baseCell.parent;var h=(!u?0:c.baseCell.closest("tr").rowIndex)<=n[0].rowIndex;if(h){var f=F("<div></div>").append(F("<td"+d+">"+Le.blank+"</td>").removeAttr("rowspan")).html();r.append(f);break}}var p=parseInt(c.baseCell.rowSpan,10);p++;c.baseCell.setAttribute("rowSpan",p);break}}if(e==="top"){n.before(r)}else{var v=o.rowSpan>1;if(v){var m=n[0].rowIndex+(o.rowSpan-2);F(F(n).parent().find("tr")[m]).after(F(r));return}n.after(r)}};t.prototype.addCol=function(t,e){var o=Le.ancestor(t.commonAncestor(),Le.isCell);var n=F(o).closest("tr");var i=F(n).siblings();i.push(n);var r=new _e(o,_e.where.Column,_e.requestAction.Add,F(n).closest("table")[0]);var a=r.getActionList();for(var s=0;s<a.length;s++){var l=a[s];var c=this.recoverAttributes(l.baseCell);switch(l.action){case _e.resultAction.AddCell:if(e==="right"){F(l.baseCell).after("<td"+c+">"+Le.blank+"</td>")}else{F(l.baseCell).before("<td"+c+">"+Le.blank+"</td>")}break;case _e.resultAction.SumSpanCount:if(e==="right"){var d=parseInt(l.baseCell.colSpan,10);d++;l.baseCell.setAttribute("colSpan",d)}else{F(l.baseCell).before("<td"+c+">"+Le.blank+"</td>")}break}}};t.prototype.recoverAttributes=function(t){var e="";if(!t){return e}var o=t.attributes||[];for(var n=0;n<o.length;n++){if(o[n].name.toLowerCase()==="id"){continue}if(o[n].specified){e+=" "+o[n].name+"='"+o[n].value+"'"}}return e};t.prototype.deleteRow=function(t){var e=Le.ancestor(t.commonAncestor(),Le.isCell);var o=F(e).closest("tr");var n=o.children("td, th").index(F(e));var i=o[0].rowIndex;var r=new _e(e,_e.where.Row,_e.requestAction.Delete,F(o).closest("table")[0]);var a=r.getActionList();for(var s=0;s<a.length;s++){if(!a[s]){continue}var l=a[s].baseCell;var c=a[s].virtualTable;var d=l.rowSpan&&l.rowSpan>1;var u=d?parseInt(l.rowSpan,10):0;switch(a[s].action){case _e.resultAction.Ignore:continue;case _e.resultAction.AddCell:var h=o.next("tr")[0];if(!h){continue}var f=o[0].cells[n];if(d){if(u>2){u--;h.insertBefore(f,h.cells[n]);h.cells[n].setAttribute("rowSpan",u);h.cells[n].innerHTML=""}else if(u===2){h.insertBefore(f,h.cells[n]);h.cells[n].removeAttribute("rowSpan");h.cells[n].innerHTML=""}}continue;case _e.resultAction.SubtractSpanCount:if(d){if(u>2){u--;l.setAttribute("rowSpan",u);if(c.rowIndex!==i&&l.cellIndex===n){l.innerHTML=""}}else if(u===2){l.removeAttribute("rowSpan");if(c.rowIndex!==i&&l.cellIndex===n){l.innerHTML=""}}}continue;case _e.resultAction.RemoveCell:continue}}o.remove()};t.prototype.deleteCol=function(t){var e=Le.ancestor(t.commonAncestor(),Le.isCell);var o=F(e).closest("tr");var n=o.children("td, th").index(F(e));var i=new _e(e,_e.where.Column,_e.requestAction.Delete,F(o).closest("table")[0]);var r=i.getActionList();for(var a=0;a<r.length;a++){if(!r[a]){continue}switch(r[a].action){case _e.resultAction.Ignore:continue;case _e.resultAction.SubtractSpanCount:var s=r[a].baseCell;var l=s.colSpan&&s.colSpan>1;if(l){var c=s.colSpan?parseInt(s.colSpan,10):0;if(c>2){c--;s.setAttribute("colSpan",c);if(s.cellIndex===n){s.innerHTML=""}}else if(c===2){s.removeAttribute("colSpan");if(s.cellIndex===n){s.innerHTML=""}}}continue;case _e.resultAction.RemoveCell:Le.remove(r[a].baseCell,true);continue}}};t.prototype.createTable=function(t,e,o){var n=[];var i;for(var r=0;r<t;r++){n.push("<td>"+Le.blank+"</td>")}i=n.join("");var a=[];var s;for(var l=0;l<e;l++){a.push("<tr>"+i+"</tr>")}s=a.join("");var c=F("<table>"+s+"</table>");if(o&&o.tableClassName){c.addClass(o.tableClassName)}return c[0]};t.prototype.deleteTable=function(t){var e=Le.ancestor(t.commonAncestor(),Le.isCell);F(e).closest("table").remove()};return t}();var Ze="bogus";var Ye=function(){function t(t){var f=this;this.context=t;this.$note=t.layoutInfo.note;this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.options=t.options;this.lang=this.options.langInfo;this.editable=this.$editable[0];this.lastRange=null;this.style=new Ke;this.table=new Ge;this.typing=new We(t);this.bullet=new Ve;this.history=new qe(this.$editable);this.context.memo("help.undo",this.lang.help.undo);this.context.memo("help.redo",this.lang.help.redo);this.context.memo("help.tab",this.lang.help.tab);this.context.memo("help.untab",this.lang.help.untab);this.context.memo("help.insertParagraph",this.lang.help.insertParagraph);this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList);this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList);this.context.memo("help.indent",this.lang.help.indent);this.context.memo("help.outdent",this.lang.help.outdent);this.context.memo("help.formatPara",this.lang.help.formatPara);this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule);this.context.memo("help.fontName",this.lang.help.fontName);var e=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"];for(var o=0,n=e.length;o<n;o++){this[e[o]]=function(e){return function(t){f.beforeCommand();document.execCommand(e,false,t);f.afterCommand(true)}}(e[o]);this.context.memo("help."+e[o],this.lang.help[e[o]])}this.fontName=this.wrapCommand(function(t){return f.fontStyling("font-family","'"+t+"'")});this.fontSize=this.wrapCommand(function(t){return f.fontStyling("font-size",t+"px")});for(var o=1;o<=6;o++){this["formatH"+o]=function(t){return function(){f.formatBlock("H"+t)}}(o);this.context.memo("help.formatH"+o,this.lang.help["formatH"+o])}this.insertParagraph=this.wrapCommand(function(){f.typing.insertParagraph(f.editable)});this.insertOrderedList=this.wrapCommand(function(){f.bullet.insertOrderedList(f.editable)});this.insertUnorderedList=this.wrapCommand(function(){f.bullet.insertUnorderedList(f.editable)});this.indent=this.wrapCommand(function(){f.bullet.indent(f.editable)});this.outdent=this.wrapCommand(function(){f.bullet.outdent(f.editable)});this.insertNode=this.wrapCommand(function(t){if(f.isLimited(F(t).text().length)){return}var e=f.createRange();e.insertNode(t);ze.createFromNodeAfter(t).select()});this.insertText=this.wrapCommand(function(t){if(f.isLimited(t.length)){return}var e=f.createRange();var o=e.insertNode(Le.createText(t));ze.create(o,Le.nodeLength(o)).select()});this.pasteHTML=this.wrapCommand(function(t){if(f.isLimited(t.length)){return}var e=f.createRange().pasteHTML(t);ze.createFromNodeAfter(tt.last(e)).select()});this.formatBlock=this.wrapCommand(function(t,e){var o=f.options.callbacks.onApplyCustomStyle;if(o){o.call(f,e,f.context,f.onFormatBlock)}else{f.onFormatBlock(t,e)}});this.insertHorizontalRule=this.wrapCommand(function(){var t=f.createRange().insertNode(Le.create("HR"));if(t.nextSibling){ze.create(t.nextSibling,0).normalize().select()}});this.lineHeight=this.wrapCommand(function(t){f.style.stylePara(f.createRange(),{lineHeight:t})});this.createLink=this.wrapCommand(function(t){var o=t.url;var e=t.text;var n=t.isNewWindow;var i=t.range||f.createRange();var r=e.length-i.toString().length;if(r>0&&f.isLimited(r)){return}var a=i.toString()!==e;if(typeof o==="string"){o=o.trim()}if(f.options.onCreateLink){o=f.options.onCreateLink(o)}else{if(!/^\.?\/(.*)/.test(o)){o=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(o)?o:"http://"+o}}var s=[];if(a){i=i.deleteContents();var l=i.insertNode(F("<A>"+e+"</A>")[0]);s.push(l)}else{s=f.style.styleNodes(i,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}F.each(s,function(t,e){F(e).attr("href",o);if(n){F(e).attr("target","_blank")}else{F(e).removeAttr("target")}});var c=ze.createFromNodeBefore(tt.head(s));var d=c.getStartPoint();var u=ze.createFromNodeAfter(tt.last(s));var h=u.getEndPoint();ze.create(d.node,d.offset,h.node,h.offset).select()});this.color=this.wrapCommand(function(t){var e=t.foreColor;var o=t.backColor;if(e){document.execCommand("foreColor",false,e)}if(o){document.execCommand("backColor",false,o)}});this.foreColor=this.wrapCommand(function(t){document.execCommand("styleWithCSS",false,true);document.execCommand("foreColor",false,t)});this.insertTable=this.wrapCommand(function(t){var e=t.split("x");var o=f.createRange().deleteContents();o.insertNode(f.table.createTable(e[0],e[1],f.options))});this.removeMedia=this.wrapCommand(function(){var t=F(f.restoreTarget()).parent();if(t.parent("figure").length){t.parent("figure").remove()}else{t=F(f.restoreTarget()).detach()}f.context.triggerEvent("media.delete",t,f.$editable)});this.floatMe=this.wrapCommand(function(t){var e=F(f.restoreTarget());e.toggleClass("note-float-left",t==="left");e.toggleClass("note-float-right",t==="right");e.css("float",t)});this.resize=this.wrapCommand(function(t){var e=F(f.restoreTarget());e.css({width:t*100+"%",height:""})})}t.prototype.initialize=function(){var e=this;this.$editable.on("keydown",function(t){if(t.keyCode===Oe.code.ENTER){e.context.triggerEvent("enter",t)}e.context.triggerEvent("keydown",t);if(!t.isDefaultPrevented()){if(e.options.shortcuts){e.handleKeyMap(t)}else{e.preventDefaultEditableShortCuts(t)}}if(e.isLimited(1,t)){return false}}).on("keyup",function(t){e.context.triggerEvent("keyup",t)}).on("focus",function(t){e.context.triggerEvent("focus",t)}).on("blur",function(t){e.context.triggerEvent("blur",t)}).on("mousedown",function(t){e.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.context.triggerEvent("mouseup",t)}).on("scroll",function(t){e.context.triggerEvent("scroll",t)}).on("paste",function(t){e.context.triggerEvent("paste",t)});this.$editable.html(Le.html(this.$note)||Le.emptyPara);this.$editable.on(ut.inputEventName,B.debounce(function(){e.context.triggerEvent("change",e.$editable.html())},10));this.$editor.on("focusin",function(t){e.context.triggerEvent("focusin",t)}).on("focusout",function(t){e.context.triggerEvent("focusout",t)});if(!this.options.airMode){if(this.options.width){this.$editor.outerWidth(this.options.width)}if(this.options.height){this.$editable.outerHeight(this.options.height)}if(this.options.maxHeight){this.$editable.css("max-height",this.options.maxHeight)}if(this.options.minHeight){this.$editable.css("min-height",this.options.minHeight)}}this.history.recordUndo()};t.prototype.destroy=function(){this.$editable.off()};t.prototype.handleKeyMap=function(t){var e=this.options.keyMap[ut.isMac?"mac":"pc"];var o=[];if(t.metaKey){o.push("CMD")}if(t.ctrlKey&&!t.altKey){o.push("CTRL")}if(t.shiftKey){o.push("SHIFT")}var n=Oe.nameFromCode[t.keyCode];if(n){o.push(n)}var i=e[o.join("+")];if(i){if(this.context.invoke(i)!==false){t.preventDefault()}}else if(Oe.isEdit(t.keyCode)){this.afterCommand()}};t.prototype.preventDefaultEditableShortCuts=function(t){if((t.ctrlKey||t.metaKey)&&tt.contains([66,73,85],t.keyCode)){t.preventDefault()}};t.prototype.isLimited=function(t,e){t=t||0;if(typeof e!=="undefined"){if(Oe.isMove(e.keyCode)||(e.ctrlKey||e.metaKey)||tt.contains([Oe.code.BACKSPACE,Oe.code.DELETE],e.keyCode)){return false}}if(this.options.maxTextLength>0){if(this.$editable.text().length+t>=this.options.maxTextLength){return true}}return false};t.prototype.createRange=function(){this.focus();return ze.create(this.editable)};t.prototype.saveRange=function(t){this.lastRange=this.createRange();if(t){this.lastRange.collapse().select()}};t.prototype.restoreRange=function(){if(this.lastRange){this.lastRange.select();this.focus()}};t.prototype.saveTarget=function(t){this.$editable.data("target",t)};t.prototype.clearTarget=function(){this.$editable.removeData("target")};t.prototype.restoreTarget=function(){return this.$editable.data("target")};t.prototype.currentStyle=function(){var t=ze.create();if(t){t=t.normalize()}return t?this.style.current(t):this.style.fromNode(this.$editable)};t.prototype.styleFromNode=function(t){return this.style.fromNode(t)};t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.undo();this.context.triggerEvent("change",this.$editable.html())};t.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.commit();this.context.triggerEvent("change",this.$editable.html())};t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.redo();this.context.triggerEvent("change",this.$editable.html())};t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html());this.focus()};t.prototype.afterCommand=function(t){this.normalizeContent();this.history.recordUndo();if(!t){this.context.triggerEvent("change",this.$editable.html())}};t.prototype.tab=function(){var t=this.createRange();if(t.isCollapsed()&&t.isOnCell()){this.table.tab(t)}else{if(this.options.tabSize===0){return false}if(!this.isLimited(this.options.tabSize)){this.beforeCommand();this.typing.insertTab(t,this.options.tabSize);this.afterCommand()}}};t.prototype.untab=function(){var t=this.createRange();if(t.isCollapsed()&&t.isOnCell()){this.table.tab(t,true)}else{if(this.options.tabSize===0){return false}}};t.prototype.wrapCommand=function(t){return function(){this.beforeCommand();t.apply(this,arguments);this.afterCommand()}};t.prototype.insertImage=function(t,e){var o=this;return je(t,e).then(function(t){o.beforeCommand();if(typeof e==="function"){e(t)}else{if(typeof e==="string"){t.attr("data-filename",e)}t.css("width",Math.min(o.$editable.width(),t.width()))}t.show();ze.create(o.editable).insertNode(t[0]);ze.createFromNodeAfter(t[0]).select();o.afterCommand()}).fail(function(t){o.context.triggerEvent("image.upload.error",t)})};t.prototype.insertImagesAsDataURL=function(t){var n=this;F.each(t,function(t,e){var o=e.name;if(n.options.maximumImageFileSize&&n.options.maximumImageFileSize<e.size){n.context.triggerEvent("image.upload.error",n.lang.image.maximumFileSizeError)}else{Ue(e).then(function(t){return n.insertImage(t,o)}).fail(function(){n.context.triggerEvent("image.upload.error")})}})};t.prototype.getSelectedText=function(){var t=this.createRange();if(t.isOnAnchor()){t=ze.createFromNode(Le.ancestor(t.sc,Le.isAnchor))}return t.toString()};t.prototype.onFormatBlock=function(t,e){t=ut.isMSIE?"<"+t+">":t;document.execCommand("FormatBlock",false,t);if(e&&e.length){var o=e[0].className||"";if(o){var n=this.createRange();var i=F([n.sc,n.ec]).closest(t);i.addClass(o)}}};t.prototype.formatPara=function(){this.formatBlock("P")};t.prototype.fontStyling=function(t,e){var o=this.createRange();if(o){var n=this.style.styleNodes(o);F(n).css(t,e);if(o.isCollapsed()){var i=tt.head(n);if(i&&!Le.nodeLength(i)){i.innerHTML=Le.ZERO_WIDTH_NBSP_CHAR;ze.createFromNodeAfter(i.firstChild).select();this.$editable.data(Ze,i)}}}};t.prototype.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=Le.ancestor(t.sc,Le.isAnchor);t=ze.createFromNode(e);t.select();this.beforeCommand();document.execCommand("unlink");this.afterCommand()}};t.prototype.getLinkInfo=function(){var t=this.createRange().expand(Le.isAnchor);var e=F(tt.head(t.nodes(Le.isAnchor)));var o={range:t,text:t.toString(),url:e.length?e.attr("href"):""};if(e.length){o.isNewWindow=e.attr("target")==="_blank"}return o};t.prototype.addRow=function(t){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.addRow(e,t);this.afterCommand()}};t.prototype.addCol=function(t){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.addCol(e,t);this.afterCommand()}};t.prototype.deleteRow=function(){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.deleteRow(t);this.afterCommand()}};t.prototype.deleteCol=function(){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.deleteCol(t);this.afterCommand()}};t.prototype.deleteTable=function(){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.deleteTable(t);this.afterCommand()}};t.prototype.resizeTo=function(t,e,o){var n;if(o){var i=t.y/t.x;var r=e.data("ratio");n={width:r>i?t.x:t.y/r,height:r>i?t.x*r:t.y}}else{n={width:t.x,height:t.y}}e.css(n)};t.prototype.hasFocus=function(){return this.$editable.is(":focus")};t.prototype.focus=function(){if(!this.hasFocus()){this.$editable.focus()}};t.prototype.isEmpty=function(){return Le.isEmpty(this.$editable[0])||Le.emptyPara===this.$editable.html()};t.prototype.empty=function(){this.context.invoke("code",Le.emptyPara)};t.prototype.normalizeContent=function(){this.$editable[0].normalize()};return t}();var Qe=function(){function t(t){this.context=t;this.$editable=t.layoutInfo.editable}t.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))};t.prototype.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var o=e.items.length>1?e.items[1]:tt.head(e.items);if(o.kind==="file"&&o.type.indexOf("image/")!==-1){this.context.invoke("editor.insertImagesOrCallback",[o.getAsFile()])}this.context.invoke("editor.afterCommand")}};return t}();var Je=function(){function t(t){this.context=t;this.$eventListener=F(document);this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.options=t.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=F(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}t.prototype.initialize=function(){if(this.options.disableDragAndDrop){this.documentEventHandlers.onDrop=function(t){t.preventDefault()};this.$eventListener=this.$dropzone;this.$eventListener.on("drop",this.documentEventHandlers.onDrop)}else{this.attachDragAndDropEvent()}};t.prototype.attachDragAndDropEvent=function(){var i=this;var n=F();var r=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(t){var e=i.context.invoke("codeview.isActivated");var o=i.$editor.width()>0&&i.$editor.height()>0;if(!e&&!n.length&&o){i.$editor.addClass("dragover");i.$dropzone.width(i.$editor.width());i.$dropzone.height(i.$editor.height());r.text(i.lang.image.dragImageHere)}n=n.add(t.target)};this.documentEventHandlers.onDragleave=function(t){n=n.not(t.target);if(!n.length){i.$editor.removeClass("dragover")}};this.documentEventHandlers.onDrop=function(){n=F();i.$editor.removeClass("dragover")};this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop);this.$dropzone.on("dragenter",function(){i.$dropzone.addClass("hover");r.text(i.lang.image.dropImage)}).on("dragleave",function(){i.$dropzone.removeClass("hover");r.text(i.lang.image.dragImageHere)});this.$dropzone.on("drop",function(t){var n=t.originalEvent.dataTransfer;t.preventDefault();if(n&&n.files&&n.files.length){i.$editable.focus();i.context.invoke("editor.insertImagesOrCallback",n.files)}else{F.each(n.types,function(t,e){var o=n.getData(e);if(e.toLowerCase().indexOf("text")>-1){i.context.invoke("editor.pasteHTML",o)}else{F(o).each(function(t,e){i.context.invoke("editor.insertNode",e)})}})}}).on("dragover",false)};t.prototype.destroy=function(){var e=this;Object.keys(this.documentEventHandlers).forEach(function(t){e.$eventListener.off(t.substr(2).toLowerCase(),e.documentEventHandlers[t])});this.documentEventHandlers={}};return t}();var Xe;if(ut.hasCodeMirror){if(ut.isSupportAmd){require(["codemirror"],function(t){Xe=t})}else{Xe=window.CodeMirror}}var to=function(){function t(t){this.context=t;this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.$codable=t.layoutInfo.codable;this.options=t.options}t.prototype.sync=function(){var t=this.isActivated();if(t&&ut.hasCodeMirror){this.$codable.data("cmEditor").save()}};t.prototype.isActivated=function(){return this.$editor.hasClass("codeview")};t.prototype.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}this.context.triggerEvent("codeview.toggled")};t.prototype.activate=function(){var e=this;this.$codable.val(Le.html(this.$editable,this.options.prettifyHtml));this.$codable.height(this.$editable.height());this.context.invoke("toolbar.updateCodeview",true);this.$editor.addClass("codeview");this.$codable.focus();if(ut.hasCodeMirror){var o=Xe.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new Xe.TernServer(this.options.codemirror.tern);o.ternServer=n;o.on("cursorActivity",function(t){n.updateArgHints(t)})}o.on("blur",function(t){e.context.triggerEvent("blur.codeview",o.getValue(),t)});o.setSize(null,this.$editable.outerHeight());this.$codable.data("cmEditor",o)}else{this.$codable.on("blur",function(t){e.context.triggerEvent("blur.codeview",e.$codable.val(),t)})}};t.prototype.deactivate=function(){if(ut.hasCodeMirror){var t=this.$codable.data("cmEditor");this.$codable.val(t.getValue());t.toTextArea()}var e=Le.value(this.$codable,this.options.prettifyHtml)||Le.emptyPara;var o=this.$editable.html()!==e;this.$editable.html(e);this.$editable.height(this.options.height?this.$codable.height():"auto");this.$editor.removeClass("codeview");if(o){this.context.triggerEvent("change",this.$editable.html(),this.$editable)}this.$editable.focus();this.context.invoke("toolbar.updateCodeview",false)};t.prototype.destroy=function(){if(this.isActivated()){this.deactivate()}};return t}();var eo=24;var oo=function(){function t(t){this.$document=F(document);this.$statusbar=t.layoutInfo.statusbar;this.$editable=t.layoutInfo.editable;this.options=t.options}t.prototype.initialize=function(){var n=this;if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.$statusbar.on("mousedown",function(t){t.preventDefault();t.stopPropagation();var o=n.$editable.offset().top-n.$document.scrollTop();var e=function(t){var e=t.clientY-(o+eo);e=n.options.minheight>0?Math.max(e,n.options.minheight):e;e=n.options.maxHeight>0?Math.min(e,n.options.maxHeight):e;n.$editable.height(e)};n.$document.on("mousemove",e).one("mouseup",function(){n.$document.off("mousemove",e)})})};t.prototype.destroy=function(){this.$statusbar.off();this.$statusbar.addClass("locked")};return t}();var no=function(){function t(t){var e=this;this.context=t;this.$editor=t.layoutInfo.editor;this.$toolbar=t.layoutInfo.toolbar;this.$editable=t.layoutInfo.editable;this.$codable=t.layoutInfo.codable;this.$window=F(window);this.$scrollbar=F("html, body");this.onResize=function(){e.resizeTo({h:e.$window.height()-e.$toolbar.outerHeight()})}}t.prototype.resizeTo=function(t){this.$editable.css("height",t.h);this.$codable.css("height",t.h);if(this.$codable.data("cmeditor")){this.$codable.data("cmeditor").setsize(null,t.h)}};t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen");if(this.isFullscreen()){this.$editable.data("orgHeight",this.$editable.css("height"));this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight"));this.$editable.css("maxHeight","");this.$window.on("resize",this.onResize).trigger("resize");this.$scrollbar.css("overflow","hidden")}else{this.$window.off("resize",this.onResize);this.resizeTo({h:this.$editable.data("orgHeight")});this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight"));this.$scrollbar.css("overflow","visible")}this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())};t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")};return t}();var io=function(){function t(t){var o=this;this.context=t;this.$document=F(document);this.$editingArea=t.layoutInfo.editingArea;this.options=t.options;this.lang=this.options.langInfo;this.events={"summernote.mousedown":function(t,e){if(o.update(e.target)){e.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){o.update()},"summernote.disable":function(){o.hide()},"summernote.codeview.toggled":function(){o.update()}}}t.prototype.initialize=function(){var r=this;this.$handle=F(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea);this.$handle.on("mousedown",function(t){if(Le.isControlSizing(t.target)){t.preventDefault();t.stopPropagation();var e=r.$handle.find(".note-control-selection").data("target");var o=e.offset();var n=r.$document.scrollTop();var i=function(t){r.context.invoke("editor.resizeTo",{x:t.clientX-o.left,y:t.clientY-(o.top-n)},e,!t.shiftKey);r.update(e[0])};r.$document.on("mousemove",i).one("mouseup",function(t){t.preventDefault();r.$document.off("mousemove",i);r.context.invoke("editor.afterCommand")});if(!e.data("ratio")){e.data("ratio",e.height()/e.width())}}});this.$handle.on("wheel",function(t){t.preventDefault();r.update()})};t.prototype.destroy=function(){this.$handle.remove()};t.prototype.update=function(t){if(this.context.isDisabled()){return false}var e=Le.isImg(t);var o=this.$handle.find(".note-control-selection");this.context.invoke("imagePopover.update",t);if(e){var n=F(t);var i=n.position();var r={left:i.left+parseInt(n.css("marginLeft"),10),top:i.top+parseInt(n.css("marginTop"),10)};var a={w:n.outerWidth(false),h:n.outerHeight(false)};o.css({display:"block",left:r.left,top:r.top,width:a.w,height:a.h}).data("target",n);var s=new Image;s.src=n.attr("src");var l=a.w+"x"+a.h+" ("+this.lang.image.original+": "+s.width+"x"+s.height+")";o.find(".note-control-selection-info").text(l);this.context.invoke("editor.saveTarget",t)}else{this.hide()}return e};t.prototype.hide=function(){this.context.invoke("editor.clearTarget");this.$handle.children().hide()};return t}();var ro="http://";var ao=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;var so=function(){function t(t){var o=this;this.context=t;this.events={"summernote.keyup":function(t,e){if(!e.isDefaultPrevented()){o.handleKeyup(e)}},"summernote.keydown":function(t,e){o.handleKeydown(e)}}}t.prototype.initialize=function(){this.lastWordRange=null};t.prototype.destroy=function(){this.lastWordRange=null};t.prototype.replace=function(){if(!this.lastWordRange){return}var t=this.lastWordRange.toString();var e=t.match(ao);if(e&&(e[1]||e[2])){var o=e[1]?t:ro+t;var n=F("<a />").html(t).attr("href",o)[0];if(this.context.options.linkTargetBlank){F(n).attr("target","_blank")}this.lastWordRange.insertNode(n);this.lastWordRange=null;this.context.invoke("editor.focus")}};t.prototype.handleKeydown=function(t){if(tt.contains([Oe.code.ENTER,Oe.code.SPACE],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=e}};t.prototype.handleKeyup=function(t){if(tt.contains([Oe.code.ENTER,Oe.code.SPACE],t.keyCode)){this.replace()}};return t}();var lo=function(){function t(t){var e=this;this.$note=t.layoutInfo.note;this.events={"summernote.change":function(){e.$note.val(t.invoke("code"))}}}t.prototype.shouldInitialize=function(){return Le.isTextarea(this.$note[0])};return t}();var co=function(){function t(t){var e=this;this.context=t;this.$editingArea=t.layoutInfo.editingArea;this.options=t.options;this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}}}t.prototype.shouldInitialize=function(){return!!this.options.placeholder};t.prototype.initialize=function(){var t=this;this.$placeholder=F('<div class="note-placeholder">');this.$placeholder.on("click",function(){t.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea);this.update()};t.prototype.destroy=function(){this.$placeholder.remove()};t.prototype.update=function(){var t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)};return t}();var uo=function(){function t(t){this.ui=F.summernote.ui;this.context=t;this.$toolbar=t.layoutInfo.toolbar;this.options=t.options;this.lang=this.options.langInfo;this.invertedKeyMap=B.invertObject(this.options.keyMap[ut.isMac?"mac":"pc"])}t.prototype.representShortcut=function(t){var e=this.invertedKeyMap[t];if(!this.options.shortcuts||!e){return""}if(ut.isMac){e=e.replace("CMD","").replace("SHIFT","")}e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+e+")"};t.prototype.button=function(t){if(!this.options.tooltip&&t.tooltip){delete t.tooltip}t.container=this.options.container;return this.ui.button(t)};t.prototype.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.addTablePopoverButtons();this.fontInstalledMap={}};t.prototype.destroy=function(){delete this.fontInstalledMap};t.prototype.isFontInstalled=function(t){if(!this.fontInstalledMap.hasOwnProperty(t)){this.fontInstalledMap[t]=ut.isFontInstalled(t)||tt.contains(this.options.fontNamesIgnoreCheck,t)}return this.fontInstalledMap[t]};t.prototype.isFontDeservedToAdd=function(t){var e=["sans-serif","serif","monospace","cursive","fantasy"];t=t.toLowerCase();return t!==""&&this.isFontInstalled(t)&&F.inArray(t,e)===-1};t.prototype.colorPalette=function(h,t,o,n){var f=this;var e=Math.floor(Math.random()*100+1);return this.ui.buttonGroup({className:"note-color "+h,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:t,click:function(t){var e=F(t.currentTarget);if(o&&n){f.context.invoke("editor.color",{backColor:e.attr("data-backColor"),foreColor:e.attr("data-foreColor")})}else if(o){f.context.invoke("editor.color",{backColor:e.attr("data-backColor")})}else if(n){f.context.invoke("editor.color",{foreColor:e.attr("data-foreColor")})}},callback:function(t){var e=t.find(".note-recent-color");if(o){e.css("background-color","#FFFF00");t.attr("data-backColor","#FFFF00")}if(!n){e.css("color","transparent")}}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(o?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker'+e+'">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker'+e+'" class="note-btn note-color-select-btn" value="#FFFF00" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(n?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker'+e+'">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker'+e+'" class="note-btn note-color-select-btn" value="#000000" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function(o){o.find(".note-holder").each(function(t,e){var o=F(e);o.append(f.ui.palette({colors:f.options.colors,colorsName:f.options.colorsName,eventName:o.data("event"),container:f.options.container,tooltip:f.options.tooltip}).render())});var n=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];o.find(".note-holder-custom").each(function(t,e){var o=F(e);o.append(f.ui.palette({colors:n,colorsName:n,eventName:o.data("event"),container:f.options.container,tooltip:f.options.tooltip}).render())});o.find("input[type=color]").each(function(t,e){F(e).change(function(){var t=o.find("#"+F(this).data("event")).find(".note-color-btn").first();var e=this.value.toUpperCase();t.css("background-color",e).attr("aria-label",e).attr("data-value",e).attr("data-original-title",e);t.click()})})},click:function(t){t.stopPropagation();var e=F("."+h);var o=F(t.target);var n=o.data("event");var i=o.attr("data-value");if(n==="openPalette"){var r=e.find("#"+i);var a=F(e.find("#"+r.data("event")).find(".note-color-row")[0]);var s=a.find(".note-color-btn").last().detach();var l=r.val();s.css("background-color",l).attr("aria-label",l).attr("data-value",l).attr("data-original-title",l);a.prepend(s);r.click()}else if(tt.contains(["backColor","foreColor"],n)){var c=n==="backColor"?"background-color":"color";var d=o.closest(".note-color").find(".note-recent-color");var u=o.closest(".note-color").find(".note-current-color-button");d.css(c,i);u.attr("data-"+n,i);f.context.invoke("editor."+n,i)}}})]}).render()};t.prototype.addToolbarButtons=function(){var r=this;this.context.memo("button.style",function(){return r.ui.buttonGroup([r.button({className:"dropdown-toggle",contents:r.ui.dropdownButtonContents(r.ui.icon(r.options.icons.magic),r.options),tooltip:r.lang.style.style,data:{toggle:"dropdown"}}),r.ui.dropdown({className:"dropdown-style",items:r.options.styleTags,title:r.lang.style.style,template:function(t){if(typeof t==="string"){t={tag:t,title:r.lang.style.hasOwnProperty(t)?r.lang.style[t]:t}}var e=t.tag;var o=t.title;var n=t.style?' style="'+t.style+'" ':"";var i=t.className?' class="'+t.className+'"':"";return"<"+e+n+i+">"+o+"</"+e+">"},click:r.context.createInvokeHandler("editor.formatBlock")})]).render()});var t=function(t,e){var o=n.options.styleTags[t];n.context.memo("button.style."+o,function(){return r.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:r.lang.style[o],click:r.context.createInvokeHandler("editor.formatBlock")}).render()})};var n=this;for(var e=0,o=this.options.styleTags.length;e<o;e++){t(e,o)}this.context.memo("button.bold",function(){return r.button({className:"note-btn-bold",contents:r.ui.icon(r.options.icons.bold),tooltip:r.lang.font.bold+r.representShortcut("bold"),click:r.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()});this.context.memo("button.italic",function(){return r.button({className:"note-btn-italic",contents:r.ui.icon(r.options.icons.italic),tooltip:r.lang.font.italic+r.representShortcut("italic"),click:r.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()});this.context.memo("button.underline",function(){return r.button({className:"note-btn-underline",contents:r.ui.icon(r.options.icons.underline),tooltip:r.lang.font.underline+r.representShortcut("underline"),click:r.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()});this.context.memo("button.clear",function(){return r.button({contents:r.ui.icon(r.options.icons.eraser),tooltip:r.lang.font.clear+r.representShortcut("removeFormat"),click:r.context.createInvokeHandler("editor.removeFormat")}).render()});this.context.memo("button.strikethrough",function(){return r.button({className:"note-btn-strikethrough",contents:r.ui.icon(r.options.icons.strikethrough),tooltip:r.lang.font.strikethrough+r.representShortcut("strikethrough"),click:r.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});this.context.memo("button.superscript",function(){return r.button({className:"note-btn-superscript",contents:r.ui.icon(r.options.icons.superscript),tooltip:r.lang.font.superscript,click:r.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});this.context.memo("button.subscript",function(){return r.button({className:"note-btn-subscript",contents:r.ui.icon(r.options.icons.subscript),tooltip:r.lang.font.subscript,click:r.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});this.context.memo("button.fontname",function(){var t=r.context.invoke("editor.currentStyle");F.each(t["font-family"].split(","),function(t,e){e=e.trim().replace(/['"]+/g,"");if(r.isFontDeservedToAdd(e)){if(F.inArray(e,r.options.fontNames)===-1){r.options.fontNames.push(e)}}});return r.ui.buttonGroup([r.button({className:"dropdown-toggle",contents:r.ui.dropdownButtonContents('<span class="note-current-fontname"/>',r.options),tooltip:r.lang.font.name,data:{toggle:"dropdown"}}),r.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:r.options.icons.menuCheck,items:r.options.fontNames.filter(r.isFontInstalled.bind(r)),title:r.lang.font.name,template:function(t){return"<span style=\"font-family: '"+t+"'\">"+t+"</span>"},click:r.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});this.context.memo("button.fontsize",function(){return r.ui.buttonGroup([r.button({className:"dropdown-toggle",contents:r.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',r.options),tooltip:r.lang.font.size,data:{toggle:"dropdown"}}),r.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:r.options.icons.menuCheck,items:r.options.fontSizes,title:r.lang.font.size,click:r.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()});this.context.memo("button.color",function(){return r.colorPalette("note-color-all",r.lang.color.recent,true,true)});this.context.memo("button.forecolor",function(){return r.colorPalette("note-color-fore",r.lang.color.foreground,false,true)});this.context.memo("button.backcolor",function(){return r.colorPalette("note-color-back",r.lang.color.background,true,false)});this.context.memo("button.ul",function(){return r.button({contents:r.ui.icon(r.options.icons.unorderedlist),tooltip:r.lang.lists.unordered+r.representShortcut("insertUnorderedList"),click:r.context.createInvokeHandler("editor.insertUnorderedList")}).render()});this.context.memo("button.ol",function(){return r.button({contents:r.ui.icon(r.options.icons.orderedlist),tooltip:r.lang.lists.ordered+r.representShortcut("insertOrderedList"),click:r.context.createInvokeHandler("editor.insertOrderedList")}).render()});var i=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")});var a=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")});var s=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")});var l=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")});var c=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")});var d=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",B.invoke(i,"render"));this.context.memo("button.justifyCenter",B.invoke(a,"render"));this.context.memo("button.justifyRight",B.invoke(s,"render"));this.context.memo("button.justifyFull",B.invoke(l,"render"));this.context.memo("button.outdent",B.invoke(c,"render"));this.context.memo("button.indent",B.invoke(d,"render"));this.context.memo("button.paragraph",function(){return r.ui.buttonGroup([r.button({className:"dropdown-toggle",contents:r.ui.dropdownButtonContents(r.ui.icon(r.options.icons.alignLeft),r.options),tooltip:r.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),r.ui.dropdown([r.ui.buttonGroup({className:"note-align",children:[i,a,s,l]}),r.ui.buttonGroup({className:"note-list",children:[c,d]})])]).render()});this.context.memo("button.height",function(){return r.ui.buttonGroup([r.button({className:"dropdown-toggle",contents:r.ui.dropdownButtonContents(r.ui.icon(r.options.icons.textHeight),r.options),tooltip:r.lang.font.height,data:{toggle:"dropdown"}}),r.ui.dropdownCheck({items:r.options.lineHeights,checkClassName:r.options.icons.menuCheck,className:"dropdown-line-height",title:r.lang.font.height,click:r.context.createInvokeHandler("editor.lineHeight")})]).render()});this.context.memo("button.table",function(){return r.ui.buttonGroup([r.button({className:"dropdown-toggle",contents:r.ui.dropdownButtonContents(r.ui.icon(r.options.icons.table),r.options),tooltip:r.lang.table.table,data:{toggle:"dropdown"}}),r.ui.dropdown({title:r.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){var e=t.find(".note-dimension-picker-mousecatcher");e.css({width:r.options.insertTableMaxSize.col+"em",height:r.options.insertTableMaxSize.row+"em"}).mousedown(r.context.createInvokeHandler("editor.insertTable")).on("mousemove",r.tableMoveHandler.bind(r))}}).render()});this.context.memo("button.link",function(){return r.button({contents:r.ui.icon(r.options.icons.link),tooltip:r.lang.link.link+r.representShortcut("linkDialog.show"),click:r.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.picture",function(){return r.button({contents:r.ui.icon(r.options.icons.picture),tooltip:r.lang.image.image,click:r.context.createInvokeHandler("imageDialog.show")}).render()});this.context.memo("button.video",function(){return r.button({contents:r.ui.icon(r.options.icons.video),tooltip:r.lang.video.video,click:r.context.createInvokeHandler("videoDialog.show")}).render()});this.context.memo("button.hr",function(){return r.button({contents:r.ui.icon(r.options.icons.minus),tooltip:r.lang.hr.insert+r.representShortcut("insertHorizontalRule"),click:r.context.createInvokeHandler("editor.insertHorizontalRule")}).render()});this.context.memo("button.fullscreen",function(){return r.button({className:"btn-fullscreen",contents:r.ui.icon(r.options.icons.arrowsAlt),tooltip:r.lang.options.fullscreen,click:r.context.createInvokeHandler("fullscreen.toggle")}).render()});this.context.memo("button.codeview",function(){return r.button({className:"btn-codeview",contents:r.ui.icon(r.options.icons.code),tooltip:r.lang.options.codeview,click:r.context.createInvokeHandler("codeview.toggle")}).render()});this.context.memo("button.redo",function(){return r.button({contents:r.ui.icon(r.options.icons.redo),tooltip:r.lang.history.redo+r.representShortcut("redo"),click:r.context.createInvokeHandler("editor.redo")}).render()});this.context.memo("button.undo",function(){return r.button({contents:r.ui.icon(r.options.icons.undo),tooltip:r.lang.history.undo+r.representShortcut("undo"),click:r.context.createInvokeHandler("editor.undo")}).render()});this.context.memo("button.help",function(){return r.button({contents:r.ui.icon(r.options.icons.question),tooltip:r.lang.options.help,click:r.context.createInvokeHandler("helpDialog.show")}).render()})};t.prototype.addImagePopoverButtons=function(){var t=this;this.context.memo("button.imageSize100",function(){return t.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:t.lang.image.resizeFull,click:t.context.createInvokeHandler("editor.resize","1")}).render()});this.context.memo("button.imageSize50",function(){return t.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:t.lang.image.resizeHalf,click:t.context.createInvokeHandler("editor.resize","0.5")}).render()});this.context.memo("button.imageSize25",function(){return t.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:t.lang.image.resizeQuarter,click:t.context.createInvokeHandler("editor.resize","0.25")}).render()});this.context.memo("button.floatLeft",function(){return t.button({contents:t.ui.icon(t.options.icons.alignLeft),tooltip:t.lang.image.floatLeft,click:t.context.createInvokeHandler("editor.floatMe","left")}).render()});this.context.memo("button.floatRight",function(){return t.button({contents:t.ui.icon(t.options.icons.alignRight),tooltip:t.lang.image.floatRight,click:t.context.createInvokeHandler("editor.floatMe","right")}).render()});this.context.memo("button.floatNone",function(){return t.button({contents:t.ui.icon(t.options.icons.alignJustify),tooltip:t.lang.image.floatNone,click:t.context.createInvokeHandler("editor.floatMe","none")}).render()});this.context.memo("button.removeMedia",function(){return t.button({contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.image.remove,click:t.context.createInvokeHandler("editor.removeMedia")}).render()})};t.prototype.addLinkPopoverButtons=function(){var t=this;this.context.memo("button.linkDialogShow",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.edit,click:t.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.unlink",function(){return t.button({contents:t.ui.icon(t.options.icons.unlink),tooltip:t.lang.link.unlink,click:t.context.createInvokeHandler("editor.unlink")}).render()})};t.prototype.addTablePopoverButtons=function(){var t=this;this.context.memo("button.addRowUp",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowAbove),tooltip:t.lang.table.addRowAbove,click:t.context.createInvokeHandler("editor.addRow","top")}).render()});this.context.memo("button.addRowDown",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowBelow),tooltip:t.lang.table.addRowBelow,click:t.context.createInvokeHandler("editor.addRow","bottom")}).render()});this.context.memo("button.addColLeft",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colBefore),tooltip:t.lang.table.addColLeft,click:t.context.createInvokeHandler("editor.addCol","left")}).render()});this.context.memo("button.addColRight",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colAfter),tooltip:t.lang.table.addColRight,click:t.context.createInvokeHandler("editor.addCol","right")}).render()});this.context.memo("button.deleteRow",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowRemove),tooltip:t.lang.table.delRow,click:t.context.createInvokeHandler("editor.deleteRow")}).render()});this.context.memo("button.deleteCol",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colRemove),tooltip:t.lang.table.delCol,click:t.context.createInvokeHandler("editor.deleteCol")}).render()});this.context.memo("button.deleteTable",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.table.delTable,click:t.context.createInvokeHandler("editor.deleteTable")}).render()})};t.prototype.build=function(t,e){for(var o=0,n=e.length;o<n;o++){var i=e[o];var r=F.isArray(i)?i[0]:i;var a=F.isArray(i)?i.length===1?[i[0]]:i[1]:[i];var s=this.ui.buttonGroup({className:"note-"+r}).render();for(var l=0,c=a.length;l<c;l++){var d=this.context.memo("button."+a[l]);if(d){s.append(typeof d==="function"?d(this.context):d)}}s.appendTo(t)}};t.prototype.updateCurrentStyle=function(t){var n=this;var e=t||this.$toolbar;var o=this.context.invoke("editor.currentStyle");this.updateBtnStates(e,{".note-btn-bold":function(){return o["font-bold"]==="bold"},".note-btn-italic":function(){return o["font-italic"]==="italic"},".note-btn-underline":function(){return o["font-underline"]==="underline"},".note-btn-subscript":function(){return o["font-subscript"]==="subscript"},".note-btn-superscript":function(){return o["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return o["font-strikethrough"]==="strikethrough"}});if(o["font-family"]){var i=o["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var r=tt.find(i,this.isFontInstalled.bind(this));e.find(".dropdown-fontname a").each(function(t,e){var o=F(e);var n=o.data("value")+""===r+"";o.toggleClass("checked",n)});e.find(".note-current-fontname").text(r).css("font-family",r)}if(o["font-size"]){var a=o["font-size"];e.find(".dropdown-fontsize a").each(function(t,e){var o=F(e);var n=o.data("value")+""===a+"";o.toggleClass("checked",n)});e.find(".note-current-fontsize").text(a)}if(o["line-height"]){var s=o["line-height"];e.find(".dropdown-line-height li a").each(function(t,e){var o=F(e).data("value")+""===s+"";n.className=o?"checked":""})}};t.prototype.updateBtnStates=function(o,t){var n=this;F.each(t,function(t,e){n.ui.toggleBtnActive(o.find(t),e())})};t.prototype.tableMoveHandler=function(t){var e=18;var o=F(t.target.parentNode);var n=o.next();var i=o.find(".note-dimension-picker-mousecatcher");var r=o.find(".note-dimension-picker-highlighted");var a=o.find(".note-dimension-picker-unhighlighted");var s;if(t.offsetX===undefined){var l=F(t.target).offset();s={x:t.pageX-l.left,y:t.pageY-l.top}}else{s={x:t.offsetX,y:t.offsetY}}var c={c:Math.ceil(s.x/e)||1,r:Math.ceil(s.y/e)||1};r.css({width:c.c+"em",height:c.r+"em"});i.data("value",c.c+"x"+c.r);if(c.c>3&&c.c<this.options.insertTableMaxSize.col){a.css({width:c.c+1+"em"})}if(c.r>3&&c.r<this.options.insertTableMaxSize.row){a.css({height:c.r+1+"em"})}n.html(c.c+" x "+c.r)};return t}();var ho=function(){function t(t){this.context=t;this.$window=F(window);this.$document=F(document);this.ui=F.summernote.ui;this.$note=t.layoutInfo.note;this.$editor=t.layoutInfo.editor;this.$toolbar=t.layoutInfo.toolbar;this.options=t.options;this.followScroll=this.followScroll.bind(this)}t.prototype.shouldInitialize=function(){return!this.options.airMode};t.prototype.initialize=function(){var t=this;this.options.toolbar=this.options.toolbar||[];if(!this.options.toolbar.length){this.$toolbar.hide()}else{this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar)}if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}this.changeContainer(false);this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){t.context.invoke("buttons.updateCurrentStyle")});this.context.invoke("buttons.updateCurrentStyle");if(this.options.followingToolbar){this.$window.on("scroll resize",this.followScroll)}};t.prototype.destroy=function(){this.$toolbar.children().remove();if(this.options.followingToolbar){this.$window.off("scroll resize",this.followScroll)}};t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen")){return false}var t=this.$toolbar.parent(".note-toolbar-wrapper");var e=this.$editor.outerHeight();var o=this.$editor.width();var n=this.$toolbar.height();t.css({height:n});var i=0;if(this.options.otherStaticBar){i=F(this.options.otherStaticBar).outerHeight()}var r=this.$document.scrollTop();var a=this.$editor.offset().top;var s=a+e;var l=a-i;var c=s-i-n;if(r>l&&r<c){this.$toolbar.css({position:"fixed",top:i,width:o})}else{this.$toolbar.css({position:"relative",top:0,width:"100%"})}};t.prototype.changeContainer=function(t){if(t){this.$toolbar.prependTo(this.$editor)}else{if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}}};t.prototype.updateFullscreen=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t);this.changeContainer(t)};t.prototype.updateCodeview=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t);if(t){this.deactivate()}else{this.activate()}};t.prototype.activate=function(t){var e=this.$toolbar.find("button");if(!t){e=e.not(".btn-codeview")}this.ui.toggleBtn(e,true)};t.prototype.deactivate=function(t){var e=this.$toolbar.find("button");if(!t){e=e.not(".btn-codeview")}this.ui.toggleBtn(e,false)};return t}();var fo=function(){function t(t){this.context=t;this.ui=F.summernote.ui;this.$body=F(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo;t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",!this.options.disableLinkTarget?F("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:true}).render()).html():""].join("");var o="btn btn-primary note-btn note-btn-primary note-link-btn";var n='<input type="button" href="#" class="'+o+'" value="'+this.lang.link.insert+'" disabled>';this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){if(t.keyCode===Oe.code.ENTER){t.preventDefault();e.trigger("click")}})};t.prototype.toggleLinkBtn=function(t,e,o){this.ui.toggleBtn(t,e.val()&&o.val())};t.prototype.showLinkDialog=function(l){var c=this;return F.Deferred(function(n){var i=c.$dialog.find(".note-link-text");var r=c.$dialog.find(".note-link-url");var a=c.$dialog.find(".note-link-btn");var s=c.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");c.ui.onDialogShown(c.$dialog,function(){c.context.triggerEvent("dialog.shown");if(!l.url){l.url=l.text}i.val(l.text);var t=function(){c.toggleLinkBtn(a,i,r);l.text=i.val()};i.on("input",t).on("paste",function(){setTimeout(t,0)});var e=function(){c.toggleLinkBtn(a,i,r);if(!l.text){i.val(r.val())}};r.on("input",e).on("paste",function(){setTimeout(e,0)}).val(l.url);if(!ut.isSupportTouch){r.trigger("focus")}c.toggleLinkBtn(a,i,r);c.bindEnterKey(r,a);c.bindEnterKey(i,a);var o=l.isNewWindow!==undefined?l.isNewWindow:c.context.options.linkTargetBlank;s.prop("checked",o);a.one("click",function(t){t.preventDefault();n.resolve({range:l.range,url:r.val(),text:i.val(),isNewWindow:s.is(":checked")});c.ui.hideDialog(c.$dialog)})});c.ui.onDialogHidden(c.$dialog,function(){i.off("input paste keypress");r.off("input paste keypress");a.off("click");if(n.state()==="pending"){n.reject()}});c.ui.showDialog(c.$dialog)}).promise()};t.prototype.show=function(){var e=this;var t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange");this.showLinkDialog(t).then(function(t){e.context.invoke("editor.restoreRange");e.context.invoke("editor.createLink",t)}).fail(function(){e.context.invoke("editor.restoreRange")})};return t}();var po=function(){function t(t){var e=this;this.context=t;this.ui=F.summernote.ui;this.options=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){e.update()},"summernote.disable summernote.dialog.shown":function(){e.hide()}}}t.prototype.shouldInitialize=function(){return!tt.isEmpty(this.options.popover.link)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(t){var e=t.find(".popover-content,.note-popover-content");e.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link)};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(){if(!this.context.invoke("editor.hasFocus")){this.hide();return}var t=this.context.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var e=Le.ancestor(t.sc,Le.isAnchor);var o=F(e).attr("href");this.$popover.find("a").attr("href",o).html(o);var n=Le.posFromPlaceholder(e);this.$popover.css({display:"block",left:n.left,top:n.top})}else{this.hide()}};t.prototype.hide=function(){this.$popover.hide()};return t}();var vo=function(){function t(t){this.context=t;this.ui=F.summernote.ui;this.$body=F(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e="";if(this.options.maximumImageFileSize){var o=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024));var n=(this.options.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)*1+" "+" KMGTP"[o]+"B";e="<small>"+(this.lang.image.maximumFileSize+" : "+n)+"</small>"}var i=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',e,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join("");var r="btn btn-primary note-btn note-btn-primary note-image-btn";var a='<input type="button" href="#" class="'+r+'" value="'+this.lang.image.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:i,footer:a}).render().appendTo(t)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){if(t.keyCode===Oe.code.ENTER){t.preventDefault();e.trigger("click")}})};t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange");this.showImageDialog().then(function(t){e.ui.hideDialog(e.$dialog);e.context.invoke("editor.restoreRange");if(typeof t==="string"){if(e.options.callbacks.onImageLinkInsert){e.context.triggerEvent("image.link.insert",t)}else{e.context.invoke("editor.insertImage",t)}}else{if(e.options.callbacks.onImageUpload){e.context.triggerEvent("image.upload",t)}else{e.context.invoke("editor.insertImagesAsDataURL",t)}}}).fail(function(){e.context.invoke("editor.restoreRange")})};t.prototype.showImageDialog=function(){var i=this;return F.Deferred(function(e){var t=i.$dialog.find(".note-image-input");var o=i.$dialog.find(".note-image-url");var n=i.$dialog.find(".note-image-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown");t.replaceWith(t.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val(""));n.click(function(t){t.preventDefault();e.resolve(o.val())});o.on("keyup paste",function(){var t=o.val();i.ui.toggleBtn(n,t)}).val("");if(!ut.isSupportTouch){o.trigger("focus")}i.bindEnterKey(o,n)});i.ui.onDialogHidden(i.$dialog,function(){t.off("change");o.off("keyup paste keypress");n.off("click");if(e.state()==="pending"){e.reject()}});i.ui.showDialog(i.$dialog)})};return t}();var mo=function(){function t(t){var e=this;this.context=t;this.ui=F.summernote.ui;this.editable=t.layoutInfo.editable[0];this.options=t.options;this.events={"summernote.disable":function(){e.hide()}}}t.prototype.shouldInitialize=function(){return!tt.isEmpty(this.options.popover.image)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image)};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(t){if(Le.isImg(t)){var e=Le.posFromPlaceholder(t);var o=Le.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:e.left,top:this.options.popatmouse?event.pageY:Math.min(e.top,o.top)})}else{this.hide()}};t.prototype.hide=function(){this.$popover.hide()};return t}();var go=function(){function t(t){var o=this;this.context=t;this.ui=F.summernote.ui;this.options=t.options;this.events={"summernote.mousedown":function(t,e){o.update(e.target)},"summernote.keyup summernote.scroll summernote.change":function(){o.update()},"summernote.disable":function(){o.hide()}}}t.prototype.shouldInitialize=function(){return!tt.isEmpty(this.options.popover.table)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table);if(ut.isFF){document.execCommand("enableInlineTableEditing",false,false)}};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(t){if(this.context.isDisabled()){return false}var e=Le.isCell(t);if(e){var o=Le.posFromPlaceholder(t);this.$popover.css({display:"block",left:o.left,top:o.top})}else{this.hide()}return e};t.prototype.hide=function(){this.$popover.hide()};return t}();var bo=function(){function t(t){this.context=t;this.ui=F.summernote.ui;this.$body=F(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join("");var o="btn btn-primary note-btn note-btn-primary note-video-btn";var n='<input type="button" href="#" class="'+o+'" value="'+this.lang.video.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){if(t.keyCode===Oe.code.ENTER){t.preventDefault();e.trigger("click")}})};t.prototype.createVideoNode=function(t){var e=/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/;var o=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/;var n=t.match(e);var i=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/;var r=t.match(i);var a=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/;var s=t.match(a);var l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/;var c=t.match(l);var d=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var u=t.match(d);var h=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var f=t.match(h);var p=/\/\/v\.qq\.com.*?vid=(.+)/;var v=t.match(p);var m=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/;var g=t.match(m);var b=/^.+.(mp4|m4v)$/;var y=t.match(b);var k=/^.+.(ogg|ogv)$/;var C=t.match(k);var w=/^.+.(webm)$/;var x=t.match(w);var S;if(n&&n[1].length===11){var T=n[1];var I=0;if(typeof n[2]!=="undefined"){var $=n[2].match(o);if($){for(var N=[3600,60,1],E=0,A=N.length;E<A;E++){I+=typeof $[E+1]!=="undefined"?N[E]*parseInt($[E+1],10):0}}}S=F("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+T+(I>0?"?start="+I:"")).attr("width","640").attr("height","360")}else if(r&&r[0].length){S=F("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(s&&s[0].length){S=F("<iframe>").attr("frameborder",0).attr("src",s[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(c&&c[3].length){S=F("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360")}else if(u&&u[2].length){S=F("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+u[2]).attr("width","640").attr("height","360")}else if(f&&f[1].length){S=F("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1])}else if(v&&v[1].length||g&&g[2].length){var R=v&&v[1].length?v[1]:g[2];S=F("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+R+"&amp;auto=0")}else if(y||C||x){S=F("<video controls>").attr("src",t).attr("width","640").attr("height","360")}else{return false}S.addClass("note-video-clip");return S[0]};t.prototype.show=function(){var o=this;var t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange");this.showVideoDialog(t).then(function(t){o.ui.hideDialog(o.$dialog);o.context.invoke("editor.restoreRange");var e=o.createVideoNode(t);if(e){o.context.invoke("editor.insertNode",e)}}).fail(function(){o.context.invoke("editor.restoreRange")})};t.prototype.showVideoDialog=function(n){var i=this;return F.Deferred(function(e){var o=i.$dialog.find(".note-video-url");var t=i.$dialog.find(".note-video-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown");o.val(n).on("input",function(){i.ui.toggleBtn(t,o.val())});if(!ut.isSupportTouch){o.trigger("focus")}t.click(function(t){t.preventDefault();e.resolve(o.val())});i.bindEnterKey(o,t)});i.ui.onDialogHidden(i.$dialog,function(){o.off("input");t.off("click");if(e.state()==="pending"){e.reject()}});i.ui.showDialog(i.$dialog)})};return t}();var yo=function(){function t(t){this.context=t;this.ui=F.summernote.ui;this.$body=F(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.11</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:function(t){t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.createShortcutList=function(){var n=this;var i=this.options.keyMap[ut.isMac?"mac":"pc"];return Object.keys(i).map(function(t){var e=i[t];var o=F('<div><div class="help-list-item"/></div>');o.append(F("<label><kbd>"+t+"</kdb></label>").css({width:180,"margin-right":10})).append(F("<span/>").html(n.context.memo("help."+e)||e));return o.html()}).join("")};t.prototype.showHelpDialog=function(){var e=this;return F.Deferred(function(t){e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown");t.resolve()});e.ui.showDialog(e.$dialog)}).promise()};t.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange");this.showHelpDialog().then(function(){t.context.invoke("editor.restoreRange")})};return t}();var ko=20;var Co=function(){function t(t){var o=this;this.context=t;this.ui=F.summernote.ui;this.options=t.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){o.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){o.hide()},"summernote.focusout":function(t,e){if(ut.isFF){return}if(!e.relatedTarget||!Le.ancestor(e.relatedTarget,B.eq(o.$popover[0]))){o.hide()}}}}t.prototype.shouldInitialize=function(){return this.options.airMode&&!tt.isEmpty(this.options.popover.air)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content");this.context.invoke("buttons.build",t,this.options.popover.air)};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(){var t=this.context.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=tt.last(t.range.getClientRects());if(e){var o=B.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(o.left+o.width/2,0)-ko,top:o.top+o.height});this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else{this.hide()}};t.prototype.hide=function(){this.$popover.hide()};return t}();var wo=5;var xo=function(){function t(t){var o=this;this.context=t;this.ui=F.summernote.ui;this.$editable=t.layoutInfo.editable;this.options=t.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||"bottom";this.hints=F.isArray(this.hint)?this.hint:[this.hint];this.events={"summernote.keyup":function(t,e){if(!e.isDefaultPrevented()){o.handleKeyup(e)}},"summernote.keydown":function(t,e){o.handleKeydown(e)},"summernote.disable summernote.dialog.shown":function(){o.hide()}}}t.prototype.shouldInitialize=function(){return this.hints.length>0};t.prototype.initialize=function(){var e=this;this.lastWordRange=null;this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find(".popover-content,.note-popover-content");this.$content.on("click",".note-hint-item",function(t){e.$content.find(".active").removeClass("active");F(t.currentTarget).addClass("active");e.replace()})};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.selectItem=function(t){this.$content.find(".active").removeClass("active");t.addClass("active");this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2};t.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active");var e=t.next();if(e.length){this.selectItem(e)}else{var o=t.parent().next();if(!o.length){o=this.$content.find(".note-hint-group").first()}this.selectItem(o.find(".note-hint-item").first())}};t.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active");var e=t.prev();if(e.length){this.selectItem(e)}else{var o=t.parent().prev();if(!o.length){o=this.$content.find(".note-hint-group").last()}this.selectItem(o.find(".note-hint-item").last())}};t.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e);ze.createFromNode(e).collapse().select();this.lastWordRange=null;this.hide();this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]);this.context.invoke("editor.focus")}};t.prototype.nodeFromItem=function(t){var e=this.hints[t.data("index")];var o=t.data("item");var n=e.content?e.content(o):o;if(typeof n==="string"){n=Le.createText(n)}return n};t.prototype.createItemTemplates=function(n,t){var i=this.hints[n];return t.map(function(t,e){var o=F('<div class="note-hint-item"/>');o.append(i.template?i.template(t):t+"");o.data({index:n,item:t});return o})};t.prototype.handleKeydown=function(t){if(!this.$popover.is(":visible")){return}if(t.keyCode===Oe.code.ENTER){t.preventDefault();this.replace()}else if(t.keyCode===Oe.code.UP){t.preventDefault();this.moveUp()}else if(t.keyCode===Oe.code.DOWN){t.preventDefault();this.moveDown()}};t.prototype.searchKeyword=function(t,e,o){var n=this.hints[t];if(n&&n.match.test(e)&&n.search){var i=n.match.exec(e);n.search(i[1],o)}else{o()}};t.prototype.createGroup=function(e,t){var o=this;var n=F('<div class="note-hint-group note-hint-group-'+e+'"/>');this.searchKeyword(e,t,function(t){t=t||[];if(t.length){n.html(o.createItemTemplates(e,t));o.show()}});return n};t.prototype.handleKeyup=function(t){var o=this;if(!tt.contains([Oe.code.ENTER,Oe.code.UP,Oe.code.DOWN],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();var n=e.toString();if(this.hints.length&&n){this.$content.empty();var i=B.rect2bnd(tt.last(e.getClientRects()));if(i){this.$popover.hide();this.lastWordRange=e;this.hints.forEach(function(t,e){if(t.match.test(n)){o.createGroup(e,n).appendTo(o.$content)}});this.$content.find(".note-hint-item:first").addClass("active");if(this.direction==="top"){this.$popover.css({left:i.left,top:i.top-this.$popover.outerHeight()-wo})}else{this.$popover.css({left:i.left,top:i.top+i.height+wo})}}}else{this.hide()}}};t.prototype.show=function(){this.$popover.show()};t.prototype.hide=function(){this.$popover.hide()};return t}();var So=function(){function t(t,e){this.ui=F.summernote.ui;this.$note=t;this.memos={};this.modules={};this.layoutInfo={};this.options=e;this.initialize()}t.prototype.initialize=function(){this.layoutInfo=this.ui.createLayout(this.$note,this.options);this._initialize();this.$note.hide();return this};t.prototype.destroy=function(){this._destroy();this.$note.removeData("summernote");this.ui.removeLayout(this.$note,this.layoutInfo)};t.prototype.reset=function(){var t=this.isDisabled();this.code(Le.emptyPara);this._destroy();this._initialize();if(t){this.disable()}};t.prototype._initialize=function(){var e=this;var o=F.extend({},this.options.buttons);Object.keys(o).forEach(function(t){e.memo("button."+t,o[t])});var n=F.extend({},this.options.modules,F.summernote.plugins||{});Object.keys(n).forEach(function(t){e.module(t,n[t],true)});Object.keys(this.modules).forEach(function(t){e.initializeModule(t)})};t.prototype._destroy=function(){var e=this;Object.keys(this.modules).reverse().forEach(function(t){e.removeModule(t)});Object.keys(this.memos).forEach(function(t){e.removeMemo(t)});this.triggerEvent("destroy",this)};t.prototype.code=function(t){var e=this.invoke("codeview.isActivated");if(t===undefined){this.invoke("codeview.sync");return e?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(e){this.layoutInfo.codable.val(t)}else{this.layoutInfo.editable.html(t)}this.$note.val(t);this.triggerEvent("change",t)}};t.prototype.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true);this.triggerEvent("disable",false)};t.prototype.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true);this.triggerEvent("disable",true)};t.prototype.triggerEvent=function(){var t=tt.head(arguments);var e=tt.tail(tt.from(arguments));var o=this.options.callbacks[B.namespaceToCamel(t,"on")];if(o){o.apply(this.$note[0],e)}this.$note.trigger("summernote."+t,e)};t.prototype.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||B.ok;if(!e.shouldInitialize()){return}if(e.initialize){e.initialize()}if(e.events){Le.attachEvents(this.$note,e.events)}};t.prototype.module=function(t,e,o){if(arguments.length===1){return this.modules[t]}this.modules[t]=new e(this);if(!o){this.initializeModule(t)}};t.prototype.removeModule=function(t){var e=this.modules[t];if(e.shouldInitialize()){if(e.events){Le.detachEvents(this.$note,e.events)}if(e.destroy){e.destroy()}}delete this.modules[t]};t.prototype.memo=function(t,e){if(arguments.length===1){return this.memos[t]}this.memos[t]=e};t.prototype.removeMemo=function(t){if(this.memos[t]&&this.memos[t].destroy){this.memos[t].destroy()}delete this.memos[t]};t.prototype.createInvokeHandlerAndUpdateState=function(e,o){var n=this;return function(t){n.createInvokeHandler(e,o)(t);n.invoke("buttons.updateCurrentStyle")}};t.prototype.createInvokeHandler=function(o,n){var i=this;return function(t){t.preventDefault();var e=F(t.target);i.invoke(o,n||e.closest("[data-value]").data("value"),e)}};t.prototype.invoke=function(){var t=tt.head(arguments);var e=tt.tail(tt.from(arguments));var o=t.split(".");var n=o.length>1;var i=n&&tt.head(o);var r=n?tt.last(o):tt.head(o);var a=this.modules[i||"editor"];if(!i&&this[r]){return this[r].apply(this,e)}else if(a&&a[r]&&a.shouldInitialize()){return a[r].apply(a,e)}};return t}();F.fn.extend({summernote:function(){var t=F.type(tt.head(arguments));var e=t==="string";var o=t==="object";var i=F.extend({},F.summernote.options,o?tt.head(arguments):{});i.langInfo=F.extend(true,{},F.summernote.lang["en-US"],F.summernote.lang[i.lang]);i.icons=F.extend(true,{},F.summernote.options.icons,i.icons);i.tooltip=i.tooltip==="auto"?!ut.isSupportTouch:i.tooltip;this.each(function(t,e){var o=F(e);if(!o.data("summernote")){var n=new So(o,i);o.data("summernote",n);o.data("summernote").triggerEvent("init",n.layoutInfo)}});var n=this.first();if(n.length){var r=n.data("summernote");if(e){return r.invoke.apply(r,tt.from(arguments))}else if(i.focus){r.invoke("editor.focus")}}return this}});F.summernote=F.extend(F.summernote,{version:"0.8.11",ui:y,dom:Le,range:ze,plugins:{},options:{modules:{editor:Ye,clipboard:Qe,dropzone:Je,codeview:to,statusbar:oo,fullscreen:no,handle:io,hintPopover:xo,autoLink:so,autoSync:lo,placeholder:co,buttons:uo,toolbar:ho,linkDialog:fo,linkPopover:po,imageDialog:vo,imagePopover:mo,tablePopover:go,videoDialog:bo,helpDialog:yo,airPopover:Co},buttons:{},lang:"en-US",followingToolbar:true,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:true,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,linkTargetBlank:true,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null,onImageLinkInsert:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});